<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<org.eventb.core.prFile version="1">
<org.eventb.core.prProof name="inv1/THM" org.eventb.core.confidence="1000" org.eventb.core.prFresh="w" org.eventb.core.prGoal="p0" org.eventb.core.prHyps="p1" org.eventb.core.prSets="users">
<org.eventb.core.lang name="L"/>
<org.eventb.core.prRule name="r0" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="type rewrites" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="REWRITE0" org.eventb.core.prHidden="p2" org.eventb.core.prHyps="" org.eventb.core.prInfHyps="p3"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p4"/>
<org.eventb.core.prHypAction name="HIDE2" org.eventb.core.prHyps="p5"/>
<org.eventb.core.prRule name="r1" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="simplification rewrites" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="REWRITE0" org.eventb.core.prHidden="p3" org.eventb.core.prHyps="" org.eventb.core.prInfHyps="p6"/>
<org.eventb.core.prRule name="r2" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="∀ goal (frees w)" org.eventb.core.prGoal="p0" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p7">
<org.eventb.core.prIdent name="w" org.eventb.core.type="users"/>
<org.eventb.core.prRule name="r3" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="⇒ goal" org.eventb.core.prGoal="p7" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p9" org.eventb.core.prHyps="p8">
<org.eventb.core.prRule name="r4" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="total function dom substitution in goal" org.eventb.core.prGoal="p9" org.eventb.core.prHyps="p1">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p10">
<org.eventb.core.prRule name="r0" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="type rewrites" org.eventb.core.prGoal="p10" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p11">
<org.eventb.core.prRule name="r5" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="⊤ goal" org.eventb.core.prGoal="p11" org.eventb.core.prHyps=""/>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
<org.eventb.core.prString name=".pos" org.eventb.core.prSValue="1"/>
<org.eventb.core.prExprRef name=".subst" org.eventb.core.prRef="e0"/>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
<org.eventb.core.prIdent name="order" org.eventb.core.type="ℙ(users×ℤ)"/>
<org.eventb.core.prIdent name="waiting" org.eventb.core.type="ℙ(users)"/>
<org.eventb.core.prPred name="p0" org.eventb.core.predicate="∀w⦂users·w∈waiting⇒w∈dom(order)"/>
<org.eventb.core.prPred name="p6" org.eventb.core.predicate="∀E⦂ℙ(users)·∃u⦂users·u∈E∧(∀w⦂users·w∈E⇒priority(w)≤priority(u))">
<org.eventb.core.prIdent name="priority" org.eventb.core.type="ℙ(users×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p3" org.eventb.core.predicate="∀E⦂ℙ(users)·⊤⇒(∃u⦂users·u∈E∧(∀w⦂users·w∈E⇒priority(w)≤priority(u)))">
<org.eventb.core.prIdent name="priority" org.eventb.core.type="ℙ(users×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p11" org.eventb.core.predicate="⊤"/>
<org.eventb.core.prPred name="p10" org.eventb.core.predicate="w∈users">
<org.eventb.core.prIdent name="w" org.eventb.core.type="users"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p4" org.eventb.core.predicate="waiting⊆users"/>
<org.eventb.core.prPred name="p7" org.eventb.core.predicate="w∈waiting⇒w∈dom(order)">
<org.eventb.core.prIdent name="w" org.eventb.core.type="users"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p9" org.eventb.core.predicate="w∈dom(order)">
<org.eventb.core.prIdent name="w" org.eventb.core.type="users"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p8" org.eventb.core.predicate="w∈waiting">
<org.eventb.core.prIdent name="w" org.eventb.core.type="users"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p1" org.eventb.core.predicate="order∈users → ℕ"/>
<org.eventb.core.prPred name="p5" org.eventb.core.predicate="passengers⊆users">
<org.eventb.core.prIdent name="passengers" org.eventb.core.type="ℙ(users)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p2" org.eventb.core.predicate="∀E⦂ℙ(users)·E⊆users⇒(∃u⦂users·u∈E∧(∀w⦂users·w∈E⇒priority(w)≤priority(u)))">
<org.eventb.core.prIdent name="priority" org.eventb.core.type="ℙ(users×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prExpr name="e0" org.eventb.core.expression="users"/>
<org.eventb.core.prReas name="r0" org.eventb.core.prRID="org.eventb.core.seqprover.typeRewrites:1"/>
<org.eventb.core.prReas name="r5" org.eventb.core.prRID="org.eventb.core.seqprover.trueGoal"/>
<org.eventb.core.prReas name="r2" org.eventb.core.prRID="org.eventb.core.seqprover.allI"/>
<org.eventb.core.prReas name="r1" org.eventb.core.prRID="org.eventb.core.seqprover.autoRewritesL4:0"/>
<org.eventb.core.prReas name="r3" org.eventb.core.prRID="org.eventb.core.seqprover.impI"/>
<org.eventb.core.prReas name="r4" org.eventb.core.prRID="org.eventb.core.seqprover.totalDom:2"/>
</org.eventb.core.prProof>
<org.eventb.core.prProof name="NBLOCK/WD" org.eventb.core.confidence="1000" org.eventb.core.prFresh="" org.eventb.core.prGoal="p0" org.eventb.core.prHyps="p1" org.eventb.core.prSets="users">
<org.eventb.core.lang name="L"/>
<org.eventb.core.prRule name="r0" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="generalized MP" org.eventb.core.prGoal="p0" org.eventb.core.prHyps="p1">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p2">
<org.eventb.core.prRule name="r1" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="simplification rewrites" org.eventb.core.prGoal="p2" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p3">
<org.eventb.core.prRule name="r2" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="⊤ goal" org.eventb.core.prGoal="p3" org.eventb.core.prHyps=""/>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
<org.eventb.core.prIdent name="capacity" org.eventb.core.type="ℤ"/>
<org.eventb.core.prIdent name="leaving" org.eventb.core.type="ℙ(users)"/>
<org.eventb.core.prIdent name="passengers" org.eventb.core.type="ℙ(users)"/>
<org.eventb.core.prIdent name="waiting" org.eventb.core.type="ℙ(users)"/>
<org.eventb.core.prPred name="p3" org.eventb.core.predicate="⊤"/>
<org.eventb.core.prPred name="p1" org.eventb.core.predicate="finite(passengers)"/>
<org.eventb.core.prPred name="p2" org.eventb.core.predicate="leaving≠(∅ ⦂ ℙ(users))∨((leaving=(∅ ⦂ ℙ(users))⇒⊤)∧((leaving=(∅ ⦂ ℙ(users))∧card(passengers)&lt;capacity)∨users ∖ (waiting∪passengers)≠(∅ ⦂ ℙ(users))∨(leaving=(∅ ⦂ ℙ(users))⇒⊤)))"/>
<org.eventb.core.prPred name="p0" org.eventb.core.predicate="leaving≠(∅ ⦂ ℙ(users))∨((leaving=(∅ ⦂ ℙ(users))⇒finite(passengers))∧((leaving=(∅ ⦂ ℙ(users))∧card(passengers)&lt;capacity)∨users ∖ (waiting∪passengers)≠(∅ ⦂ ℙ(users))∨(leaving=(∅ ⦂ ℙ(users))⇒finite(passengers))))"/>
<org.eventb.core.prReas name="r0" org.eventb.core.prRID="org.eventb.core.seqprover.genMPL2"/>
<org.eventb.core.prReas name="r2" org.eventb.core.prRID="org.eventb.core.seqprover.trueGoal"/>
<org.eventb.core.prReas name="r1" org.eventb.core.prRID="org.eventb.core.seqprover.autoRewritesL4:0"/>
</org.eventb.core.prProof>
<org.eventb.core.prProof name="NBLOCKPRIORITY/WD" org.eventb.core.confidence="1000" org.eventb.core.prFresh="u,w" org.eventb.core.prGoal="p0" org.eventb.core.prHyps="p1,p2" org.eventb.core.prSets="users">
<org.eventb.core.lang name="L"/>
<org.eventb.core.prRule name="r0" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="generalized MP" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="REWRITE0" org.eventb.core.prHidden="p3" org.eventb.core.prHyps="p5" org.eventb.core.prInfHyps="p4"/>
<org.eventb.core.prRule name="r1" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="simplification rewrites" org.eventb.core.prGoal="p0" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p8">
<org.eventb.core.prHypAction name="REWRITE0" org.eventb.core.prHidden="p6" org.eventb.core.prHyps="" org.eventb.core.prInfHyps="p7"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p4"/>
<org.eventb.core.prRule name="r2" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="type rewrites" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="REWRITE0" org.eventb.core.prHidden="p9" org.eventb.core.prHyps="" org.eventb.core.prInfHyps="p10"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p11"/>
<org.eventb.core.prHypAction name="HIDE2" org.eventb.core.prHyps="p12"/>
<org.eventb.core.prRule name="r1" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="simplification rewrites" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="REWRITE0" org.eventb.core.prHidden="p10" org.eventb.core.prHyps="" org.eventb.core.prInfHyps="p13"/>
<org.eventb.core.prRule name="r3" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="⇒ goal" org.eventb.core.prGoal="p8" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p15" org.eventb.core.prHyps="p14">
<org.eventb.core.prRule name="r4" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="∀ goal (frees u,w)" org.eventb.core.prGoal="p15" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p16">
<org.eventb.core.prIdent name="u" org.eventb.core.type="users"/>
<org.eventb.core.prIdent name="w" org.eventb.core.type="users"/>
<org.eventb.core.prRule name="r3" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="⇒ goal" org.eventb.core.prGoal="p16" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p19" org.eventb.core.prHyps="p17,p18">
<org.eventb.core.prRule name="r5" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="∧ goal" org.eventb.core.prGoal="p19" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p20">
<org.eventb.core.prRule name="r0" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="generalized MP" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="REWRITE0" org.eventb.core.prHidden="p7" org.eventb.core.prHyps="p14" org.eventb.core.prInfHyps="p21"/>
<org.eventb.core.prRule name="r1" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="simplification rewrites" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="REWRITE0" org.eventb.core.prHidden="p21" org.eventb.core.prHyps="" org.eventb.core.prInfHyps="p22"/>
<org.eventb.core.prRule name="r6" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="total function dom substitution in goal" org.eventb.core.prGoal="p20" org.eventb.core.prHyps="p1">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p23">
<org.eventb.core.prRule name="r2" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="type rewrites" org.eventb.core.prGoal="p23" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p24">
<org.eventb.core.prRule name="r7" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="⊤ goal" org.eventb.core.prGoal="p24" org.eventb.core.prHyps=""/>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
<org.eventb.core.prString name=".pos" org.eventb.core.prSValue="1"/>
<org.eventb.core.prExprRef name=".subst" org.eventb.core.prRef="e0"/>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
<org.eventb.core.prAnte name="(" org.eventb.core.prGoal="p25">
<org.eventb.core.prRule name="r8" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="functional goal" org.eventb.core.prGoal="p25" org.eventb.core.prHyps="p1"/>
</org.eventb.core.prAnte>
<org.eventb.core.prAnte name=")" org.eventb.core.prGoal="p26">
<org.eventb.core.prRule name="r0" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="generalized MP" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="REWRITE0" org.eventb.core.prHidden="p7" org.eventb.core.prHyps="p14" org.eventb.core.prInfHyps="p21"/>
<org.eventb.core.prRule name="r1" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="simplification rewrites" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="REWRITE0" org.eventb.core.prHidden="p21" org.eventb.core.prHyps="" org.eventb.core.prInfHyps="p22"/>
<org.eventb.core.prRule name="r6" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="total function dom substitution in goal" org.eventb.core.prGoal="p26" org.eventb.core.prHyps="p1">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p27">
<org.eventb.core.prRule name="r2" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="type rewrites" org.eventb.core.prGoal="p27" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p24">
<org.eventb.core.prRule name="r7" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="⊤ goal" org.eventb.core.prGoal="p24" org.eventb.core.prHyps=""/>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
<org.eventb.core.prString name=".pos" org.eventb.core.prSValue="1"/>
<org.eventb.core.prExprRef name=".subst" org.eventb.core.prRef="e0"/>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
<org.eventb.core.prAnte name="*" org.eventb.core.prGoal="p28">
<org.eventb.core.prRule name="r3" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="⇒ goal" org.eventb.core.prGoal="p28" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p32" org.eventb.core.prHyps="p29,p30,p31">
<org.eventb.core.prRule name="r5" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="∧ goal" org.eventb.core.prGoal="p32" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p33">
<org.eventb.core.prRule name="r0" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="generalized MP" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="REWRITE0" org.eventb.core.prHidden="p7" org.eventb.core.prHyps="p14" org.eventb.core.prInfHyps="p21"/>
<org.eventb.core.prRule name="r1" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="simplification rewrites" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="REWRITE0" org.eventb.core.prHidden="p21" org.eventb.core.prHyps="" org.eventb.core.prInfHyps="p22"/>
<org.eventb.core.prRule name="r6" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="total function dom substitution in goal" org.eventb.core.prGoal="p33" org.eventb.core.prHyps="p2">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p23">
<org.eventb.core.prRule name="r2" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="type rewrites" org.eventb.core.prGoal="p23" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p24">
<org.eventb.core.prRule name="r7" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="⊤ goal" org.eventb.core.prGoal="p24" org.eventb.core.prHyps=""/>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
<org.eventb.core.prString name=".pos" org.eventb.core.prSValue="1"/>
<org.eventb.core.prExprRef name=".subst" org.eventb.core.prRef="e0"/>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
<org.eventb.core.prAnte name="(" org.eventb.core.prGoal="p34">
<org.eventb.core.prRule name="r8" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="functional goal" org.eventb.core.prGoal="p34" org.eventb.core.prHyps="p2"/>
</org.eventb.core.prAnte>
<org.eventb.core.prAnte name=")" org.eventb.core.prGoal="p35">
<org.eventb.core.prRule name="r0" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="generalized MP" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="REWRITE0" org.eventb.core.prHidden="p7" org.eventb.core.prHyps="p14" org.eventb.core.prInfHyps="p21"/>
<org.eventb.core.prRule name="r1" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="simplification rewrites" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="REWRITE0" org.eventb.core.prHidden="p21" org.eventb.core.prHyps="" org.eventb.core.prInfHyps="p22"/>
<org.eventb.core.prRule name="r6" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="total function dom substitution in goal" org.eventb.core.prGoal="p35" org.eventb.core.prHyps="p2">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p27">
<org.eventb.core.prRule name="r2" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="type rewrites" org.eventb.core.prGoal="p27" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p24">
<org.eventb.core.prRule name="r7" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="⊤ goal" org.eventb.core.prGoal="p24" org.eventb.core.prHyps=""/>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
<org.eventb.core.prString name=".pos" org.eventb.core.prSValue="1"/>
<org.eventb.core.prExprRef name=".subst" org.eventb.core.prRef="e0"/>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
<org.eventb.core.prIdent name="order" org.eventb.core.type="ℙ(users×ℤ)"/>
<org.eventb.core.prIdent name="priority" org.eventb.core.type="ℙ(users×ℤ)"/>
<org.eventb.core.prIdent name="waiting" org.eventb.core.type="ℙ(users)"/>
<org.eventb.core.prPred name="p31" org.eventb.core.predicate="¬w=u">
<org.eventb.core.prIdent name="u" org.eventb.core.type="users"/>
<org.eventb.core.prIdent name="w" org.eventb.core.type="users"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p10" org.eventb.core.predicate="∀E⦂ℙ(users)·⊤⇒(∃u⦂users·u∈E∧(∀w⦂users·w∈E⇒priority(w)≤priority(u)))"/>
<org.eventb.core.prPred name="p29" org.eventb.core.predicate="priority(u)≥priority(w)">
<org.eventb.core.prIdent name="u" org.eventb.core.type="users"/>
<org.eventb.core.prIdent name="w" org.eventb.core.type="users"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p19" org.eventb.core.predicate="u∈dom(priority)∧priority∈users ⇸ ℤ∧w∈dom(priority)∧(priority(u)≥priority(w)∧priority(w)=priority(u)∧¬w=u⇒u∈dom(order)∧order∈users ⇸ ℤ∧w∈dom(order))">
<org.eventb.core.prIdent name="u" org.eventb.core.type="users"/>
<org.eventb.core.prIdent name="w" org.eventb.core.type="users"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p20" org.eventb.core.predicate="u∈dom(priority)">
<org.eventb.core.prIdent name="u" org.eventb.core.type="users"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p23" org.eventb.core.predicate="u∈users">
<org.eventb.core.prIdent name="u" org.eventb.core.type="users"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p18" org.eventb.core.predicate="w∈waiting">
<org.eventb.core.prIdent name="w" org.eventb.core.type="users"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p2" org.eventb.core.predicate="order∈users → ℕ"/>
<org.eventb.core.prPred name="p7" org.eventb.core.predicate="¬leaving=(∅ ⦂ ℙ(users))∨(leaving=(∅ ⦂ ℙ(users))∧card(passengers)&lt;capacity)∨¬users⊆waiting∪passengers∨(leaving=(∅ ⦂ ℙ(users))∧card(passengers)=capacity)∨(leaving=(∅ ⦂ ℙ(users))∧waiting=(∅ ⦂ ℙ(users)))">
<org.eventb.core.prIdent name="capacity" org.eventb.core.type="ℤ"/>
<org.eventb.core.prIdent name="leaving" org.eventb.core.type="ℙ(users)"/>
<org.eventb.core.prIdent name="passengers" org.eventb.core.type="ℙ(users)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p5" org.eventb.core.predicate="finite(passengers)">
<org.eventb.core.prIdent name="passengers" org.eventb.core.type="ℙ(users)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p32" org.eventb.core.predicate="u∈dom(order)∧order∈users ⇸ ℤ∧w∈dom(order)">
<org.eventb.core.prIdent name="u" org.eventb.core.type="users"/>
<org.eventb.core.prIdent name="w" org.eventb.core.type="users"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p22" org.eventb.core.predicate="¬leaving=(∅ ⦂ ℙ(users))∨(leaving=(∅ ⦂ ℙ(users))∧card(passengers)&lt;capacity)∨¬users⊆waiting∪passengers∨(leaving=(∅ ⦂ ℙ(users))∧card(passengers)=capacity)">
<org.eventb.core.prIdent name="capacity" org.eventb.core.type="ℤ"/>
<org.eventb.core.prIdent name="leaving" org.eventb.core.type="ℙ(users)"/>
<org.eventb.core.prIdent name="passengers" org.eventb.core.type="ℙ(users)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p25" org.eventb.core.predicate="priority∈users ⇸ ℤ"/>
<org.eventb.core.prPred name="p33" org.eventb.core.predicate="u∈dom(order)">
<org.eventb.core.prIdent name="u" org.eventb.core.type="users"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p0" org.eventb.core.predicate="waiting≠(∅ ⦂ ℙ(users))⇒(∀u⦂users,w⦂users·u∈waiting∧w∈waiting⇒u∈dom(priority)∧priority∈users ⇸ ℤ∧w∈dom(priority)∧(priority(u)≥priority(w)∧priority(w)=priority(u)∧w≠u⇒u∈dom(order)∧order∈users ⇸ ℤ∧w∈dom(order)))"/>
<org.eventb.core.prPred name="p21" org.eventb.core.predicate="¬leaving=(∅ ⦂ ℙ(users))∨(leaving=(∅ ⦂ ℙ(users))∧card(passengers)&lt;capacity)∨¬users⊆waiting∪passengers∨(leaving=(∅ ⦂ ℙ(users))∧card(passengers)=capacity)∨(leaving=(∅ ⦂ ℙ(users))∧⊥)">
<org.eventb.core.prIdent name="capacity" org.eventb.core.type="ℤ"/>
<org.eventb.core.prIdent name="leaving" org.eventb.core.type="ℙ(users)"/>
<org.eventb.core.prIdent name="passengers" org.eventb.core.type="ℙ(users)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p3" org.eventb.core.predicate="leaving≠(∅ ⦂ ℙ(users))∨((leaving=(∅ ⦂ ℙ(users))⇒finite(passengers))∧((leaving=(∅ ⦂ ℙ(users))∧card(passengers)&lt;capacity)∨users ∖ (waiting∪passengers)≠(∅ ⦂ ℙ(users))∨(leaving=(∅ ⦂ ℙ(users))⇒finite(passengers))))">
<org.eventb.core.prIdent name="capacity" org.eventb.core.type="ℤ"/>
<org.eventb.core.prIdent name="leaving" org.eventb.core.type="ℙ(users)"/>
<org.eventb.core.prIdent name="passengers" org.eventb.core.type="ℙ(users)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p8" org.eventb.core.predicate="¬waiting=(∅ ⦂ ℙ(users))⇒(∀u⦂users,w⦂users·u∈waiting∧w∈waiting⇒u∈dom(priority)∧priority∈users ⇸ ℤ∧w∈dom(priority)∧(priority(u)≥priority(w)∧priority(w)=priority(u)∧¬w=u⇒u∈dom(order)∧order∈users ⇸ ℤ∧w∈dom(order)))"/>
<org.eventb.core.prPred name="p34" org.eventb.core.predicate="order∈users ⇸ ℤ"/>
<org.eventb.core.prPred name="p24" org.eventb.core.predicate="⊤"/>
<org.eventb.core.prPred name="p26" org.eventb.core.predicate="w∈dom(priority)">
<org.eventb.core.prIdent name="w" org.eventb.core.type="users"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p27" org.eventb.core.predicate="w∈users">
<org.eventb.core.prIdent name="w" org.eventb.core.type="users"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p11" org.eventb.core.predicate="waiting⊆users"/>
<org.eventb.core.prPred name="p28" org.eventb.core.predicate="priority(u)≥priority(w)∧priority(w)=priority(u)∧¬w=u⇒u∈dom(order)∧order∈users ⇸ ℤ∧w∈dom(order)">
<org.eventb.core.prIdent name="u" org.eventb.core.type="users"/>
<org.eventb.core.prIdent name="w" org.eventb.core.type="users"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p1" org.eventb.core.predicate="priority∈users → ℕ"/>
<org.eventb.core.prPred name="p30" org.eventb.core.predicate="priority(w)=priority(u)">
<org.eventb.core.prIdent name="u" org.eventb.core.type="users"/>
<org.eventb.core.prIdent name="w" org.eventb.core.type="users"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p9" org.eventb.core.predicate="∀E⦂ℙ(users)·E⊆users⇒(∃u⦂users·u∈E∧(∀w⦂users·w∈E⇒priority(w)≤priority(u)))"/>
<org.eventb.core.prPred name="p13" org.eventb.core.predicate="∀E⦂ℙ(users)·∃u⦂users·u∈E∧(∀w⦂users·w∈E⇒priority(w)≤priority(u))"/>
<org.eventb.core.prPred name="p14" org.eventb.core.predicate="¬waiting=(∅ ⦂ ℙ(users))"/>
<org.eventb.core.prPred name="p16" org.eventb.core.predicate="u∈waiting∧w∈waiting⇒u∈dom(priority)∧priority∈users ⇸ ℤ∧w∈dom(priority)∧(priority(u)≥priority(w)∧priority(w)=priority(u)∧¬w=u⇒u∈dom(order)∧order∈users ⇸ ℤ∧w∈dom(order))">
<org.eventb.core.prIdent name="u" org.eventb.core.type="users"/>
<org.eventb.core.prIdent name="w" org.eventb.core.type="users"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p17" org.eventb.core.predicate="u∈waiting">
<org.eventb.core.prIdent name="u" org.eventb.core.type="users"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p6" org.eventb.core.predicate="leaving≠(∅ ⦂ ℙ(users))∨(leaving=(∅ ⦂ ℙ(users))∧card(passengers)&lt;capacity)∨users ∖ (waiting∪passengers)≠(∅ ⦂ ℙ(users))∨(leaving=(∅ ⦂ ℙ(users))∧card(passengers)=capacity)∨(leaving=(∅ ⦂ ℙ(users))∧waiting=(∅ ⦂ ℙ(users)))">
<org.eventb.core.prIdent name="capacity" org.eventb.core.type="ℤ"/>
<org.eventb.core.prIdent name="leaving" org.eventb.core.type="ℙ(users)"/>
<org.eventb.core.prIdent name="passengers" org.eventb.core.type="ℙ(users)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p35" org.eventb.core.predicate="w∈dom(order)">
<org.eventb.core.prIdent name="w" org.eventb.core.type="users"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p4" org.eventb.core.predicate="leaving≠(∅ ⦂ ℙ(users))∨((leaving=(∅ ⦂ ℙ(users))⇒⊤)∧((leaving=(∅ ⦂ ℙ(users))∧card(passengers)&lt;capacity)∨users ∖ (waiting∪passengers)≠(∅ ⦂ ℙ(users))∨(leaving=(∅ ⦂ ℙ(users))⇒⊤)))">
<org.eventb.core.prIdent name="capacity" org.eventb.core.type="ℤ"/>
<org.eventb.core.prIdent name="leaving" org.eventb.core.type="ℙ(users)"/>
<org.eventb.core.prIdent name="passengers" org.eventb.core.type="ℙ(users)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p15" org.eventb.core.predicate="∀u⦂users,w⦂users·u∈waiting∧w∈waiting⇒u∈dom(priority)∧priority∈users ⇸ ℤ∧w∈dom(priority)∧(priority(u)≥priority(w)∧priority(w)=priority(u)∧¬w=u⇒u∈dom(order)∧order∈users ⇸ ℤ∧w∈dom(order))"/>
<org.eventb.core.prPred name="p12" org.eventb.core.predicate="passengers⊆users">
<org.eventb.core.prIdent name="passengers" org.eventb.core.type="ℙ(users)"/>
</org.eventb.core.prPred>
<org.eventb.core.prExpr name="e0" org.eventb.core.expression="users"/>
<org.eventb.core.prReas name="r5" org.eventb.core.prRID="org.eventb.core.seqprover.conj:0"/>
<org.eventb.core.prReas name="r8" org.eventb.core.prRID="org.eventb.core.seqprover.isFunGoal"/>
<org.eventb.core.prReas name="r2" org.eventb.core.prRID="org.eventb.core.seqprover.typeRewrites:1"/>
<org.eventb.core.prReas name="r0" org.eventb.core.prRID="org.eventb.core.seqprover.genMPL2"/>
<org.eventb.core.prReas name="r7" org.eventb.core.prRID="org.eventb.core.seqprover.trueGoal"/>
<org.eventb.core.prReas name="r4" org.eventb.core.prRID="org.eventb.core.seqprover.allI"/>
<org.eventb.core.prReas name="r1" org.eventb.core.prRID="org.eventb.core.seqprover.autoRewritesL4:0"/>
<org.eventb.core.prReas name="r3" org.eventb.core.prRID="org.eventb.core.seqprover.impI"/>
<org.eventb.core.prReas name="r6" org.eventb.core.prRID="org.eventb.core.seqprover.totalDom:2"/>
</org.eventb.core.prProof>
<org.eventb.core.prProof name="ORDERVERIFY/WD" org.eventb.core.confidence="1000" org.eventb.core.prFresh="u,v" org.eventb.core.prGoal="p0" org.eventb.core.prHyps="p1" org.eventb.core.prSets="users">
<org.eventb.core.lang name="L"/>
<org.eventb.core.prRule name="r0" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="generalized MP" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="REWRITE0" org.eventb.core.prHidden="p2" org.eventb.core.prHyps="p4" org.eventb.core.prInfHyps="p3"/>
<org.eventb.core.prRule name="r1" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="simplification rewrites" org.eventb.core.prGoal="p0" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p9">
<org.eventb.core.prHypAction name="REWRITE0" org.eventb.core.prHidden="p5" org.eventb.core.prHyps="" org.eventb.core.prInfHyps="p6"/>
<org.eventb.core.prHypAction name="REWRITE1" org.eventb.core.prHidden="p7" org.eventb.core.prHyps="" org.eventb.core.prInfHyps="p8"/>
<org.eventb.core.prHypAction name="HIDE2" org.eventb.core.prHyps="p3"/>
<org.eventb.core.prRule name="r2" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="type rewrites" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="REWRITE0" org.eventb.core.prHidden="p10" org.eventb.core.prHyps="" org.eventb.core.prInfHyps="p11"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p12"/>
<org.eventb.core.prHypAction name="HIDE2" org.eventb.core.prHyps="p13"/>
<org.eventb.core.prRule name="r1" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="simplification rewrites" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="REWRITE0" org.eventb.core.prHidden="p11" org.eventb.core.prHyps="" org.eventb.core.prInfHyps="p14"/>
<org.eventb.core.prRule name="r3" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="∀ goal (frees u,v)" org.eventb.core.prGoal="p9" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p15">
<org.eventb.core.prIdent name="u" org.eventb.core.type="users"/>
<org.eventb.core.prIdent name="v" org.eventb.core.type="users"/>
<org.eventb.core.prRule name="r4" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="⇒ goal" org.eventb.core.prGoal="p15" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p19" org.eventb.core.prHyps="p16,p17,p18">
<org.eventb.core.prRule name="r5" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="functional goal" org.eventb.core.prGoal="p19" org.eventb.core.prHyps="p1"/>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
<org.eventb.core.prIdent name="order" org.eventb.core.type="ℙ(users×ℤ)"/>
<org.eventb.core.prPred name="p11" org.eventb.core.predicate="∀E⦂ℙ(users)·⊤⇒(∃u⦂users·u∈E∧(∀w⦂users·w∈E⇒priority(w)≤priority(u)))">
<org.eventb.core.prIdent name="priority" org.eventb.core.type="ℙ(users×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p7" org.eventb.core.predicate="waiting≠(∅ ⦂ ℙ(users))⇒(∃u⦂users·∀w⦂users·u∈waiting∧(w∈waiting⇒priority(u)≥priority(w)∧(priority(w)=priority(u)∧w≠u⇒order(u)&lt;order(w))))">
<org.eventb.core.prIdent name="priority" org.eventb.core.type="ℙ(users×ℤ)"/>
<org.eventb.core.prIdent name="waiting" org.eventb.core.type="ℙ(users)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p12" org.eventb.core.predicate="waiting⊆users">
<org.eventb.core.prIdent name="waiting" org.eventb.core.type="ℙ(users)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p0" org.eventb.core.predicate="∀u⦂users,v⦂users·u∈dom(order)∧v∈dom(order)∧u≠v⇒order∈users ⇸ ℤ"/>
<org.eventb.core.prPred name="p15" org.eventb.core.predicate="u∈dom(order)∧v∈dom(order)∧¬u=v⇒order∈users ⇸ ℤ">
<org.eventb.core.prIdent name="u" org.eventb.core.type="users"/>
<org.eventb.core.prIdent name="v" org.eventb.core.type="users"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p1" org.eventb.core.predicate="order∈users → ℕ"/>
<org.eventb.core.prPred name="p17" org.eventb.core.predicate="v∈dom(order)">
<org.eventb.core.prIdent name="v" org.eventb.core.type="users"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p6" org.eventb.core.predicate="¬leaving=(∅ ⦂ ℙ(users))∨(leaving=(∅ ⦂ ℙ(users))∧card(passengers)&lt;capacity)∨¬users⊆waiting∪passengers∨(leaving=(∅ ⦂ ℙ(users))∧card(passengers)=capacity)∨(leaving=(∅ ⦂ ℙ(users))∧waiting=(∅ ⦂ ℙ(users)))">
<org.eventb.core.prIdent name="capacity" org.eventb.core.type="ℤ"/>
<org.eventb.core.prIdent name="leaving" org.eventb.core.type="ℙ(users)"/>
<org.eventb.core.prIdent name="passengers" org.eventb.core.type="ℙ(users)"/>
<org.eventb.core.prIdent name="waiting" org.eventb.core.type="ℙ(users)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p10" org.eventb.core.predicate="∀E⦂ℙ(users)·E⊆users⇒(∃u⦂users·u∈E∧(∀w⦂users·w∈E⇒priority(w)≤priority(u)))">
<org.eventb.core.prIdent name="priority" org.eventb.core.type="ℙ(users×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p14" org.eventb.core.predicate="∀E⦂ℙ(users)·∃u⦂users·u∈E∧(∀w⦂users·w∈E⇒priority(w)≤priority(u))">
<org.eventb.core.prIdent name="priority" org.eventb.core.type="ℙ(users×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p18" org.eventb.core.predicate="¬u=v">
<org.eventb.core.prIdent name="u" org.eventb.core.type="users"/>
<org.eventb.core.prIdent name="v" org.eventb.core.type="users"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p4" org.eventb.core.predicate="finite(passengers)">
<org.eventb.core.prIdent name="passengers" org.eventb.core.type="ℙ(users)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p5" org.eventb.core.predicate="leaving≠(∅ ⦂ ℙ(users))∨(leaving=(∅ ⦂ ℙ(users))∧card(passengers)&lt;capacity)∨users ∖ (waiting∪passengers)≠(∅ ⦂ ℙ(users))∨(leaving=(∅ ⦂ ℙ(users))∧card(passengers)=capacity)∨(leaving=(∅ ⦂ ℙ(users))∧waiting=(∅ ⦂ ℙ(users)))">
<org.eventb.core.prIdent name="capacity" org.eventb.core.type="ℤ"/>
<org.eventb.core.prIdent name="leaving" org.eventb.core.type="ℙ(users)"/>
<org.eventb.core.prIdent name="passengers" org.eventb.core.type="ℙ(users)"/>
<org.eventb.core.prIdent name="waiting" org.eventb.core.type="ℙ(users)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p8" org.eventb.core.predicate="¬waiting=(∅ ⦂ ℙ(users))⇒(∃u⦂users·u∈waiting∧(∀w⦂users·w∈waiting⇒priority(u)≥priority(w)∧(priority(w)=priority(u)∧¬w=u⇒order(u)&lt;order(w))))">
<org.eventb.core.prIdent name="priority" org.eventb.core.type="ℙ(users×ℤ)"/>
<org.eventb.core.prIdent name="waiting" org.eventb.core.type="ℙ(users)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p3" org.eventb.core.predicate="leaving≠(∅ ⦂ ℙ(users))∨((leaving=(∅ ⦂ ℙ(users))⇒⊤)∧((leaving=(∅ ⦂ ℙ(users))∧card(passengers)&lt;capacity)∨users ∖ (waiting∪passengers)≠(∅ ⦂ ℙ(users))∨(leaving=(∅ ⦂ ℙ(users))⇒⊤)))">
<org.eventb.core.prIdent name="capacity" org.eventb.core.type="ℤ"/>
<org.eventb.core.prIdent name="leaving" org.eventb.core.type="ℙ(users)"/>
<org.eventb.core.prIdent name="passengers" org.eventb.core.type="ℙ(users)"/>
<org.eventb.core.prIdent name="waiting" org.eventb.core.type="ℙ(users)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p16" org.eventb.core.predicate="u∈dom(order)">
<org.eventb.core.prIdent name="u" org.eventb.core.type="users"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p2" org.eventb.core.predicate="leaving≠(∅ ⦂ ℙ(users))∨((leaving=(∅ ⦂ ℙ(users))⇒finite(passengers))∧((leaving=(∅ ⦂ ℙ(users))∧card(passengers)&lt;capacity)∨users ∖ (waiting∪passengers)≠(∅ ⦂ ℙ(users))∨(leaving=(∅ ⦂ ℙ(users))⇒finite(passengers))))">
<org.eventb.core.prIdent name="capacity" org.eventb.core.type="ℤ"/>
<org.eventb.core.prIdent name="leaving" org.eventb.core.type="ℙ(users)"/>
<org.eventb.core.prIdent name="passengers" org.eventb.core.type="ℙ(users)"/>
<org.eventb.core.prIdent name="waiting" org.eventb.core.type="ℙ(users)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p19" org.eventb.core.predicate="order∈users ⇸ ℤ"/>
<org.eventb.core.prPred name="p13" org.eventb.core.predicate="passengers⊆users">
<org.eventb.core.prIdent name="passengers" org.eventb.core.type="ℙ(users)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p9" org.eventb.core.predicate="∀u⦂users,v⦂users·u∈dom(order)∧v∈dom(order)∧¬u=v⇒order∈users ⇸ ℤ"/>
<org.eventb.core.prReas name="r5" org.eventb.core.prRID="org.eventb.core.seqprover.isFunGoal"/>
<org.eventb.core.prReas name="r2" org.eventb.core.prRID="org.eventb.core.seqprover.typeRewrites:1"/>
<org.eventb.core.prReas name="r0" org.eventb.core.prRID="org.eventb.core.seqprover.genMPL2"/>
<org.eventb.core.prReas name="r3" org.eventb.core.prRID="org.eventb.core.seqprover.allI"/>
<org.eventb.core.prReas name="r1" org.eventb.core.prRID="org.eventb.core.seqprover.autoRewritesL4:0"/>
<org.eventb.core.prReas name="r4" org.eventb.core.prRID="org.eventb.core.seqprover.impI"/>
</org.eventb.core.prProof>
<org.eventb.core.prProof name="INITIALISATION/NBLOCK/INV" org.eventb.core.confidence="1000" org.eventb.core.prFresh="" org.eventb.core.prGoal="p0" org.eventb.core.prHyps="" org.eventb.core.prSets="users">
<org.eventb.core.lang name="L"/>
<org.eventb.core.prRule name="r0" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="generalized MP" org.eventb.core.prGoal="p0" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p0">
<org.eventb.core.prHypAction name="REWRITE0" org.eventb.core.prHidden="p1" org.eventb.core.prHyps="" org.eventb.core.prInfHyps="p2"/>
<org.eventb.core.prRule name="r1" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="simplification rewrites" org.eventb.core.prGoal="p0" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p10">
<org.eventb.core.prHypAction name="REWRITE0" org.eventb.core.prHidden="p3" org.eventb.core.prHyps="" org.eventb.core.prInfHyps="p4,p5"/>
<org.eventb.core.prHypAction name="REWRITE1" org.eventb.core.prHidden="p6" org.eventb.core.prHyps="" org.eventb.core.prInfHyps="p7,p8"/>
<org.eventb.core.prHypAction name="REWRITE2" org.eventb.core.prHidden="p2" org.eventb.core.prHyps="" org.eventb.core.prInfHyps="p9"/>
<org.eventb.core.prRule name="r2" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="⊤ goal" org.eventb.core.prGoal="p10" org.eventb.core.prHyps=""/>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
<org.eventb.core.prIdent name="capacity" org.eventb.core.type="ℤ"/>
<org.eventb.core.prIdent name="leaving'" org.eventb.core.type="ℙ(users)"/>
<org.eventb.core.prIdent name="passengers'" org.eventb.core.type="ℙ(users)"/>
<org.eventb.core.prPred name="p10" org.eventb.core.predicate="⊤"/>
<org.eventb.core.prPred name="p4" org.eventb.core.predicate="passengers'⊆users"/>
<org.eventb.core.prPred name="p3" org.eventb.core.predicate="passengers'⊆users∧card(passengers')≤capacity"/>
<org.eventb.core.prPred name="p7" org.eventb.core.predicate="leaving'⊆users"/>
<org.eventb.core.prPred name="p1" org.eventb.core.predicate="leaving'≠(∅ ⦂ ℙ(users))∨((leaving'=(∅ ⦂ ℙ(users))⇒finite(passengers'))∧((leaving'=(∅ ⦂ ℙ(users))∧card(passengers')&lt;capacity)∨users ∖ ((∅ ⦂ ℙ(users))∪passengers')≠(∅ ⦂ ℙ(users))∨(leaving'=(∅ ⦂ ℙ(users))⇒finite(passengers'))))"/>
<org.eventb.core.prPred name="p5" org.eventb.core.predicate="card(passengers')≤capacity"/>
<org.eventb.core.prPred name="p8" org.eventb.core.predicate="card(leaving')≤capacity"/>
<org.eventb.core.prPred name="p9" org.eventb.core.predicate="leaving'=(∅ ⦂ ℙ(users))⇒finite(passengers')"/>
<org.eventb.core.prPred name="p0" org.eventb.core.predicate="leaving'≠(∅ ⦂ ℙ(users))∨(leaving'=(∅ ⦂ ℙ(users))∧card(passengers')&lt;capacity)∨users ∖ ((∅ ⦂ ℙ(users))∪passengers')≠(∅ ⦂ ℙ(users))∨(leaving'=(∅ ⦂ ℙ(users))∧card(passengers')=capacity)∨(leaving'=(∅ ⦂ ℙ(users))∧(∅ ⦂ ℙ(users))=(∅ ⦂ ℙ(users)))"/>
<org.eventb.core.prPred name="p2" org.eventb.core.predicate="⊥∨((leaving'=(∅ ⦂ ℙ(users))⇒finite(passengers'))∧(⊥∨⊥∨(leaving'=(∅ ⦂ ℙ(users))⇒finite(passengers'))))"/>
<org.eventb.core.prPred name="p6" org.eventb.core.predicate="leaving'⊆users∧card(leaving')≤capacity"/>
<org.eventb.core.prReas name="r0" org.eventb.core.prRID="org.eventb.core.seqprover.genMPL2"/>
<org.eventb.core.prReas name="r2" org.eventb.core.prRID="org.eventb.core.seqprover.trueGoal"/>
<org.eventb.core.prReas name="r1" org.eventb.core.prRID="org.eventb.core.seqprover.autoRewritesL4:0"/>
</org.eventb.core.prProof>
<org.eventb.core.prProof name="INITIALISATION/NBLOCKPRIORITY/INV" org.eventb.core.confidence="1000" org.eventb.core.prFresh="" org.eventb.core.prGoal="p0" org.eventb.core.prHyps="" org.eventb.core.prSets="users">
<org.eventb.core.lang name="L"/>
<org.eventb.core.prRule name="r0" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="simplification rewrites" org.eventb.core.prGoal="p0" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p1">
<org.eventb.core.prRule name="r1" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="⊤ goal" org.eventb.core.prGoal="p1" org.eventb.core.prHyps=""/>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
<org.eventb.core.prIdent name="priority" org.eventb.core.type="ℙ(users×ℤ)"/>
<org.eventb.core.prPred name="p1" org.eventb.core.predicate="⊤"/>
<org.eventb.core.prPred name="p0" org.eventb.core.predicate="(∅ ⦂ ℙ(users))≠(∅ ⦂ ℙ(users))⇒(∃u⦂users·∀w⦂users·u∈(∅ ⦂ ℙ(users))∧(w∈(∅ ⦂ ℙ(users))⇒priority(u)≥priority(w)∧(priority(w)=priority(u)∧w≠u⇒(∅ ⦂ ℙ(users×ℤ))(u)&lt;(∅ ⦂ ℙ(users×ℤ))(w))))"/>
<org.eventb.core.prReas name="r1" org.eventb.core.prRID="org.eventb.core.seqprover.trueGoal"/>
<org.eventb.core.prReas name="r0" org.eventb.core.prRID="org.eventb.core.seqprover.autoRewritesL4:0"/>
</org.eventb.core.prProof>
<org.eventb.core.prProof name="INITIALISATION/ORDERVERIFY/INV" org.eventb.core.confidence="1000" org.eventb.core.prFresh="" org.eventb.core.prGoal="p0" org.eventb.core.prHyps="" org.eventb.core.prSets="users">
<org.eventb.core.lang name="L"/>
<org.eventb.core.prRule name="r0" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="simplification rewrites" org.eventb.core.prGoal="p0" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p1">
<org.eventb.core.prRule name="r1" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="⊤ goal" org.eventb.core.prGoal="p1" org.eventb.core.prHyps=""/>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
<org.eventb.core.prPred name="p0" org.eventb.core.predicate="∀u⦂users·∀v⦂users·u∈dom(∅ ⦂ ℙ(users×ℤ))∧v∈dom(∅ ⦂ ℙ(users×ℤ))∧u≠v⇒(∅ ⦂ ℙ(users×ℤ))(u)≠(∅ ⦂ ℙ(users×ℤ))(v)"/>
<org.eventb.core.prPred name="p1" org.eventb.core.predicate="⊤"/>
<org.eventb.core.prReas name="r1" org.eventb.core.prRID="org.eventb.core.seqprover.trueGoal"/>
<org.eventb.core.prReas name="r0" org.eventb.core.prRID="org.eventb.core.seqprover.autoRewritesL4:0"/>
</org.eventb.core.prProof>
<org.eventb.core.prProof name="USER_ARRIVES/NBLOCK/INV" org.eventb.core.confidence="0" org.eventb.core.prFresh="" org.eventb.core.prGoal="p0" org.eventb.core.prHyps="" org.eventb.core.prSets="users">
<org.eventb.core.lang name="L"/>
<org.eventb.core.prRule name="r0" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="generalized MP" org.eventb.core.prGoal="p0" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p0">
<org.eventb.core.prHypAction name="REWRITE0" org.eventb.core.prHidden="p1" org.eventb.core.prHyps="" org.eventb.core.prInfHyps="p2"/>
<org.eventb.core.prHypAction name="REWRITE1" org.eventb.core.prHidden="p3" org.eventb.core.prHyps="p5" org.eventb.core.prInfHyps="p4"/>
<org.eventb.core.prHypAction name="REWRITE2" org.eventb.core.prHidden="p6" org.eventb.core.prHyps="p5" org.eventb.core.prInfHyps="p7"/>
<org.eventb.core.prRule name="r1" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="simplification rewrites" org.eventb.core.prGoal="p0" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p15">
<org.eventb.core.prHypAction name="REWRITE0" org.eventb.core.prHidden="p8" org.eventb.core.prHyps="" org.eventb.core.prInfHyps="p9"/>
<org.eventb.core.prHypAction name="REWRITE1" org.eventb.core.prHidden="p10" org.eventb.core.prHyps="" org.eventb.core.prInfHyps="p11"/>
<org.eventb.core.prHypAction name="REWRITE2" org.eventb.core.prHidden="p12" org.eventb.core.prHyps="" org.eventb.core.prInfHyps="p13"/>
<org.eventb.core.prHypAction name="REWRITE3" org.eventb.core.prHidden="p2" org.eventb.core.prHyps="" org.eventb.core.prInfHyps="p14"/>
<org.eventb.core.prHypAction name="HIDE4" org.eventb.core.prHyps="p4"/>
<org.eventb.core.prHypAction name="HIDE5" org.eventb.core.prHyps="p7"/>
<org.eventb.core.prRule name="r0" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="generalized MP" org.eventb.core.prGoal="p15" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p15">
<org.eventb.core.prHypAction name="REWRITE0" org.eventb.core.prHidden="p14" org.eventb.core.prHyps="" org.eventb.core.prInfHyps="p16"/>
<org.eventb.core.prRule name="r1" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="simplification rewrites" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="REWRITE0" org.eventb.core.prHidden="p16" org.eventb.core.prHyps="" org.eventb.core.prInfHyps="p17"/>
<org.eventb.core.prRule name="r2" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="type rewrites" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="REWRITE0" org.eventb.core.prHidden="p18" org.eventb.core.prHyps="" org.eventb.core.prInfHyps="p19"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p20"/>
<org.eventb.core.prHypAction name="HIDE2" org.eventb.core.prHyps="p21"/>
<org.eventb.core.prRule name="r1" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="simplification rewrites" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="REWRITE0" org.eventb.core.prHidden="p19" org.eventb.core.prHyps="" org.eventb.core.prInfHyps="p22"/>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
<org.eventb.core.prIdent name="capacity" org.eventb.core.type="ℤ"/>
<org.eventb.core.prIdent name="leaving" org.eventb.core.type="ℙ(users)"/>
<org.eventb.core.prIdent name="passengers" org.eventb.core.type="ℙ(users)"/>
<org.eventb.core.prIdent name="user" org.eventb.core.type="users"/>
<org.eventb.core.prIdent name="waiting" org.eventb.core.type="ℙ(users)"/>
<org.eventb.core.prPred name="p2" org.eventb.core.predicate="⊥∨⊥∨users ∖ (waiting∪passengers)≠(∅ ⦂ ℙ(users))∨⊥∨(leaving=(∅ ⦂ ℙ(users))∧waiting=(∅ ⦂ ℙ(users)))"/>
<org.eventb.core.prPred name="p19" org.eventb.core.predicate="∀E⦂ℙ(users)·⊤⇒(∃u⦂users·u∈E∧(∀w⦂users·w∈E⇒priority(w)≤priority(u)))">
<org.eventb.core.prIdent name="priority" org.eventb.core.type="ℙ(users×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p8" org.eventb.core.predicate="waiting≠(∅ ⦂ ℙ(users))⇒(∃u⦂users·∀w⦂users·u∈waiting∧(w∈waiting⇒priority(u)≥priority(w)∧(priority(w)=priority(u)∧w≠u⇒order(u)&lt;order(w))))">
<org.eventb.core.prIdent name="order" org.eventb.core.type="ℙ(users×ℤ)"/>
<org.eventb.core.prIdent name="priority" org.eventb.core.type="ℙ(users×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p6" org.eventb.core.predicate="leaving≠(∅ ⦂ ℙ(users))∨((leaving=(∅ ⦂ ℙ(users))⇒finite(passengers))∧((leaving=(∅ ⦂ ℙ(users))∧card(passengers)&lt;capacity)∨users ∖ (waiting∪{user}∪passengers)≠(∅ ⦂ ℙ(users))∨(leaving=(∅ ⦂ ℙ(users))⇒finite(passengers))))"/>
<org.eventb.core.prPred name="p20" org.eventb.core.predicate="waiting⊆users"/>
<org.eventb.core.prPred name="p14" org.eventb.core.predicate="¬users⊆waiting∪passengers∨(leaving=(∅ ⦂ ℙ(users))∧waiting=(∅ ⦂ ℙ(users)))"/>
<org.eventb.core.prPred name="p11" org.eventb.core.predicate="∀u⦂users,v⦂users·u∈dom(order)∧v∈dom(order)∧¬u=v⇒¬order(u)=order(v)">
<org.eventb.core.prIdent name="order" org.eventb.core.type="ℙ(users×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p17" org.eventb.core.predicate="¬users⊆waiting∪passengers∨waiting=(∅ ⦂ ℙ(users))"/>
<org.eventb.core.prPred name="p4" org.eventb.core.predicate="⊥∨((leaving=(∅ ⦂ ℙ(users))⇒⊤)∧(⊥∨users ∖ (waiting∪passengers)≠(∅ ⦂ ℙ(users))∨(leaving=(∅ ⦂ ℙ(users))⇒⊤)))"/>
<org.eventb.core.prPred name="p18" org.eventb.core.predicate="∀E⦂ℙ(users)·E⊆users⇒(∃u⦂users·u∈E∧(∀w⦂users·w∈E⇒priority(w)≤priority(u)))">
<org.eventb.core.prIdent name="priority" org.eventb.core.type="ℙ(users×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p0" org.eventb.core.predicate="leaving≠(∅ ⦂ ℙ(users))∨(leaving=(∅ ⦂ ℙ(users))∧card(passengers)&lt;capacity)∨users ∖ ((waiting∪{user})∪passengers)≠(∅ ⦂ ℙ(users))∨(leaving=(∅ ⦂ ℙ(users))∧card(passengers)=capacity)∨(leaving=(∅ ⦂ ℙ(users))∧waiting∪{user}=(∅ ⦂ ℙ(users)))"/>
<org.eventb.core.prPred name="p12" org.eventb.core.predicate="users ∖ (passengers∪waiting)≠(∅ ⦂ ℙ(users))"/>
<org.eventb.core.prPred name="p22" org.eventb.core.predicate="∀E⦂ℙ(users)·∃u⦂users·u∈E∧(∀w⦂users·w∈E⇒priority(w)≤priority(u))">
<org.eventb.core.prIdent name="priority" org.eventb.core.type="ℙ(users×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p5" org.eventb.core.predicate="finite(passengers)"/>
<org.eventb.core.prPred name="p1" org.eventb.core.predicate="leaving≠(∅ ⦂ ℙ(users))∨(leaving=(∅ ⦂ ℙ(users))∧card(passengers)&lt;capacity)∨users ∖ (waiting∪passengers)≠(∅ ⦂ ℙ(users))∨(leaving=(∅ ⦂ ℙ(users))∧card(passengers)=capacity)∨(leaving=(∅ ⦂ ℙ(users))∧waiting=(∅ ⦂ ℙ(users)))"/>
<org.eventb.core.prPred name="p9" org.eventb.core.predicate="¬waiting=(∅ ⦂ ℙ(users))⇒(∃u⦂users·u∈waiting∧(∀w⦂users·w∈waiting⇒priority(u)≥priority(w)∧(priority(w)=priority(u)∧¬w=u⇒order(u)&lt;order(w))))">
<org.eventb.core.prIdent name="order" org.eventb.core.type="ℙ(users×ℤ)"/>
<org.eventb.core.prIdent name="priority" org.eventb.core.type="ℙ(users×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p7" org.eventb.core.predicate="⊥∨((leaving=(∅ ⦂ ℙ(users))⇒⊤)∧(⊥∨users ∖ (waiting∪{user}∪passengers)≠(∅ ⦂ ℙ(users))∨(leaving=(∅ ⦂ ℙ(users))⇒⊤)))"/>
<org.eventb.core.prPred name="p13" org.eventb.core.predicate="¬users⊆passengers∪waiting"/>
<org.eventb.core.prPred name="p15" org.eventb.core.predicate="¬leaving=(∅ ⦂ ℙ(users))∨(leaving=(∅ ⦂ ℙ(users))∧card(passengers)&lt;capacity)∨¬users⊆waiting∪{user}∪passengers∨(leaving=(∅ ⦂ ℙ(users))∧card(passengers)=capacity)"/>
<org.eventb.core.prPred name="p3" org.eventb.core.predicate="leaving≠(∅ ⦂ ℙ(users))∨((leaving=(∅ ⦂ ℙ(users))⇒finite(passengers))∧((leaving=(∅ ⦂ ℙ(users))∧card(passengers)&lt;capacity)∨users ∖ (waiting∪passengers)≠(∅ ⦂ ℙ(users))∨(leaving=(∅ ⦂ ℙ(users))⇒finite(passengers))))"/>
<org.eventb.core.prPred name="p16" org.eventb.core.predicate="¬users⊆waiting∪passengers∨(⊤∧waiting=(∅ ⦂ ℙ(users)))"/>
<org.eventb.core.prPred name="p10" org.eventb.core.predicate="∀u⦂users·∀v⦂users·u∈dom(order)∧v∈dom(order)∧u≠v⇒order(u)≠order(v)">
<org.eventb.core.prIdent name="order" org.eventb.core.type="ℙ(users×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p21" org.eventb.core.predicate="passengers⊆users"/>
<org.eventb.core.prReas name="r2" org.eventb.core.prRID="org.eventb.core.seqprover.typeRewrites:1"/>
<org.eventb.core.prReas name="r0" org.eventb.core.prRID="org.eventb.core.seqprover.genMPL2"/>
<org.eventb.core.prReas name="r1" org.eventb.core.prRID="org.eventb.core.seqprover.autoRewritesL4:0"/>
</org.eventb.core.prProof>
<org.eventb.core.prProof name="USER_ARRIVES/NBLOCKPRIORITY/INV" org.eventb.core.confidence="0" org.eventb.core.prFresh="" org.eventb.core.prGoal="p0" org.eventb.core.prHyps="" org.eventb.core.prSets="users">
<org.eventb.core.lang name="L"/>
<org.eventb.core.prRule name="r0" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="generalized MP" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="REWRITE0" org.eventb.core.prHidden="p1" org.eventb.core.prHyps="p3" org.eventb.core.prInfHyps="p2"/>
<org.eventb.core.prRule name="r1" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="simplification rewrites" org.eventb.core.prGoal="p0" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p12">
<org.eventb.core.prHypAction name="REWRITE0" org.eventb.core.prHidden="p4" org.eventb.core.prHyps="" org.eventb.core.prInfHyps="p5"/>
<org.eventb.core.prHypAction name="REWRITE1" org.eventb.core.prHidden="p6" org.eventb.core.prHyps="" org.eventb.core.prInfHyps="p7"/>
<org.eventb.core.prHypAction name="REWRITE2" org.eventb.core.prHidden="p8" org.eventb.core.prHyps="" org.eventb.core.prInfHyps="p9"/>
<org.eventb.core.prHypAction name="REWRITE3" org.eventb.core.prHidden="p10" org.eventb.core.prHyps="" org.eventb.core.prInfHyps="p11"/>
<org.eventb.core.prHypAction name="HIDE4" org.eventb.core.prHyps="p2"/>
<org.eventb.core.prRule name="r2" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="type rewrites" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="REWRITE0" org.eventb.core.prHidden="p13" org.eventb.core.prHyps="" org.eventb.core.prInfHyps="p14"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p15"/>
<org.eventb.core.prHypAction name="HIDE2" org.eventb.core.prHyps="p16"/>
<org.eventb.core.prRule name="r1" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="simplification rewrites" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="REWRITE0" org.eventb.core.prHidden="p14" org.eventb.core.prHyps="" org.eventb.core.prInfHyps="p17"/>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
<org.eventb.core.prIdent name="counter" org.eventb.core.type="ℤ"/>
<org.eventb.core.prIdent name="order" org.eventb.core.type="ℙ(users×ℤ)"/>
<org.eventb.core.prIdent name="priority" org.eventb.core.type="ℙ(users×ℤ)"/>
<org.eventb.core.prIdent name="user" org.eventb.core.type="users"/>
<org.eventb.core.prIdent name="waiting" org.eventb.core.type="ℙ(users)"/>
<org.eventb.core.prPred name="p14" org.eventb.core.predicate="∀E⦂ℙ(users)·⊤⇒(∃u⦂users·u∈E∧(∀w⦂users·w∈E⇒priority(w)≤priority(u)))"/>
<org.eventb.core.prPred name="p6" org.eventb.core.predicate="waiting≠(∅ ⦂ ℙ(users))⇒(∃u⦂users·∀w⦂users·u∈waiting∧(w∈waiting⇒priority(u)≥priority(w)∧(priority(w)=priority(u)∧w≠u⇒order(u)&lt;order(w))))"/>
<org.eventb.core.prPred name="p15" org.eventb.core.predicate="waiting⊆users"/>
<org.eventb.core.prPred name="p12" org.eventb.core.predicate="∃u⦂users·u∈waiting∪{user}∧(∀w⦂users·w∈waiting∪{user}⇒priority(u)≥priority(w)∧(priority(w)=priority(u)∧¬w=u⇒(order{user ↦ counter})(u)&lt;(order{user ↦ counter})(w)))"/>
<org.eventb.core.prPred name="p5" org.eventb.core.predicate="¬leaving=(∅ ⦂ ℙ(users))∨(leaving=(∅ ⦂ ℙ(users))∧card(passengers)&lt;capacity)∨¬users⊆waiting∪passengers∨(leaving=(∅ ⦂ ℙ(users))∧card(passengers)=capacity)∨(leaving=(∅ ⦂ ℙ(users))∧waiting=(∅ ⦂ ℙ(users)))">
<org.eventb.core.prIdent name="capacity" org.eventb.core.type="ℤ"/>
<org.eventb.core.prIdent name="leaving" org.eventb.core.type="ℙ(users)"/>
<org.eventb.core.prIdent name="passengers" org.eventb.core.type="ℙ(users)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p9" org.eventb.core.predicate="∀u⦂users,v⦂users·u∈dom(order)∧v∈dom(order)∧¬u=v⇒¬order(u)=order(v)"/>
<org.eventb.core.prPred name="p13" org.eventb.core.predicate="∀E⦂ℙ(users)·E⊆users⇒(∃u⦂users·u∈E∧(∀w⦂users·w∈E⇒priority(w)≤priority(u)))"/>
<org.eventb.core.prPred name="p10" org.eventb.core.predicate="users ∖ (passengers∪waiting)≠(∅ ⦂ ℙ(users))">
<org.eventb.core.prIdent name="passengers" org.eventb.core.type="ℙ(users)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p17" org.eventb.core.predicate="∀E⦂ℙ(users)·∃u⦂users·u∈E∧(∀w⦂users·w∈E⇒priority(w)≤priority(u))"/>
<org.eventb.core.prPred name="p0" org.eventb.core.predicate="waiting∪{user}≠(∅ ⦂ ℙ(users))⇒(∃u⦂users·∀w⦂users·u∈waiting∪{user}∧(w∈waiting∪{user}⇒priority(u)≥priority(w)∧(priority(w)=priority(u)∧w≠u⇒(order{user ↦ counter})(u)&lt;(order{user ↦ counter})(w))))"/>
<org.eventb.core.prPred name="p3" org.eventb.core.predicate="finite(passengers)">
<org.eventb.core.prIdent name="passengers" org.eventb.core.type="ℙ(users)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p4" org.eventb.core.predicate="leaving≠(∅ ⦂ ℙ(users))∨(leaving=(∅ ⦂ ℙ(users))∧card(passengers)&lt;capacity)∨users ∖ (waiting∪passengers)≠(∅ ⦂ ℙ(users))∨(leaving=(∅ ⦂ ℙ(users))∧card(passengers)=capacity)∨(leaving=(∅ ⦂ ℙ(users))∧waiting=(∅ ⦂ ℙ(users)))">
<org.eventb.core.prIdent name="capacity" org.eventb.core.type="ℤ"/>
<org.eventb.core.prIdent name="leaving" org.eventb.core.type="ℙ(users)"/>
<org.eventb.core.prIdent name="passengers" org.eventb.core.type="ℙ(users)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p7" org.eventb.core.predicate="¬waiting=(∅ ⦂ ℙ(users))⇒(∃u⦂users·u∈waiting∧(∀w⦂users·w∈waiting⇒priority(u)≥priority(w)∧(priority(w)=priority(u)∧¬w=u⇒order(u)&lt;order(w))))"/>
<org.eventb.core.prPred name="p11" org.eventb.core.predicate="¬users⊆passengers∪waiting">
<org.eventb.core.prIdent name="passengers" org.eventb.core.type="ℙ(users)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p2" org.eventb.core.predicate="leaving≠(∅ ⦂ ℙ(users))∨((leaving=(∅ ⦂ ℙ(users))⇒⊤)∧((leaving=(∅ ⦂ ℙ(users))∧card(passengers)&lt;capacity)∨users ∖ (waiting∪passengers)≠(∅ ⦂ ℙ(users))∨(leaving=(∅ ⦂ ℙ(users))⇒⊤)))">
<org.eventb.core.prIdent name="capacity" org.eventb.core.type="ℤ"/>
<org.eventb.core.prIdent name="leaving" org.eventb.core.type="ℙ(users)"/>
<org.eventb.core.prIdent name="passengers" org.eventb.core.type="ℙ(users)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p1" org.eventb.core.predicate="leaving≠(∅ ⦂ ℙ(users))∨((leaving=(∅ ⦂ ℙ(users))⇒finite(passengers))∧((leaving=(∅ ⦂ ℙ(users))∧card(passengers)&lt;capacity)∨users ∖ (waiting∪passengers)≠(∅ ⦂ ℙ(users))∨(leaving=(∅ ⦂ ℙ(users))⇒finite(passengers))))">
<org.eventb.core.prIdent name="capacity" org.eventb.core.type="ℤ"/>
<org.eventb.core.prIdent name="leaving" org.eventb.core.type="ℙ(users)"/>
<org.eventb.core.prIdent name="passengers" org.eventb.core.type="ℙ(users)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p8" org.eventb.core.predicate="∀u⦂users·∀v⦂users·u∈dom(order)∧v∈dom(order)∧u≠v⇒order(u)≠order(v)"/>
<org.eventb.core.prPred name="p16" org.eventb.core.predicate="passengers⊆users">
<org.eventb.core.prIdent name="passengers" org.eventb.core.type="ℙ(users)"/>
</org.eventb.core.prPred>
<org.eventb.core.prReas name="r2" org.eventb.core.prRID="org.eventb.core.seqprover.typeRewrites:1"/>
<org.eventb.core.prReas name="r0" org.eventb.core.prRID="org.eventb.core.seqprover.genMPL2"/>
<org.eventb.core.prReas name="r1" org.eventb.core.prRID="org.eventb.core.seqprover.autoRewritesL4:0"/>
</org.eventb.core.prProof>
<org.eventb.core.prProof name="USER_ARRIVES/ORDERVERIFY/INV" org.eventb.core.confidence="0" org.eventb.core.prFresh="u,v" org.eventb.core.prGoal="p0" org.eventb.core.prHyps="p1" org.eventb.core.prSets="users">
<org.eventb.core.lang name="L"/>
<org.eventb.core.prRule name="r0" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="generalized MP" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="REWRITE0" org.eventb.core.prHidden="p2" org.eventb.core.prHyps="p4" org.eventb.core.prInfHyps="p3"/>
<org.eventb.core.prRule name="r1" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="simplification rewrites" org.eventb.core.prGoal="p0" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p13">
<org.eventb.core.prHypAction name="REWRITE0" org.eventb.core.prHidden="p5" org.eventb.core.prHyps="" org.eventb.core.prInfHyps="p6"/>
<org.eventb.core.prHypAction name="REWRITE1" org.eventb.core.prHidden="p7" org.eventb.core.prHyps="" org.eventb.core.prInfHyps="p8"/>
<org.eventb.core.prHypAction name="REWRITE2" org.eventb.core.prHidden="p9" org.eventb.core.prHyps="" org.eventb.core.prInfHyps="p10"/>
<org.eventb.core.prHypAction name="REWRITE3" org.eventb.core.prHidden="p11" org.eventb.core.prHyps="" org.eventb.core.prInfHyps="p12"/>
<org.eventb.core.prHypAction name="HIDE4" org.eventb.core.prHyps="p3"/>
<org.eventb.core.prRule name="r2" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="type rewrites" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="REWRITE0" org.eventb.core.prHidden="p14" org.eventb.core.prHyps="" org.eventb.core.prInfHyps="p15"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p16"/>
<org.eventb.core.prHypAction name="HIDE2" org.eventb.core.prHyps="p17"/>
<org.eventb.core.prRule name="r1" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="simplification rewrites" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="REWRITE0" org.eventb.core.prHidden="p15" org.eventb.core.prHyps="" org.eventb.core.prInfHyps="p18"/>
<org.eventb.core.prRule name="r3" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="∀ goal (frees u,v)" org.eventb.core.prGoal="p13" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p19">
<org.eventb.core.prIdent name="u" org.eventb.core.type="users"/>
<org.eventb.core.prIdent name="v" org.eventb.core.type="users"/>
<org.eventb.core.prRule name="r4" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="⇒ goal" org.eventb.core.prGoal="p19" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p23" org.eventb.core.prHyps="p20,p21,p22">
<org.eventb.core.prRule name="r5" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="ovr in goal" org.eventb.core.prGoal="p23" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p25" org.eventb.core.prHyps="p24">
<org.eventb.core.prRule name="r5" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="ovr in goal" org.eventb.core.prGoal="p25" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p27" org.eventb.core.prHyps="p26">
<org.eventb.core.prRule name="r1" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="simplification rewrites" org.eventb.core.prGoal="p27" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p28">
<org.eventb.core.prRule name="r6" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with u=user" org.eventb.core.prHyps="p24">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p20" org.eventb.core.prInfHyps="p29"/>
<org.eventb.core.prHypAction name="FORWARD_INF1" org.eventb.core.prHyps="p22" org.eventb.core.prInfHyps="p30"/>
<org.eventb.core.prHypAction name="DESELECT2" org.eventb.core.prHyps="p20,p22"/>
<org.eventb.core.prRule name="r0" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="generalized MP" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="REWRITE0" org.eventb.core.prHidden="p30" org.eventb.core.prHyps="p26" org.eventb.core.prInfHyps="p31"/>
<org.eventb.core.prRule name="r1" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="simplification rewrites" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="REWRITE0" org.eventb.core.prHidden="p31" org.eventb.core.prHyps="" org.eventb.core.prInfHyps="p28"/>
<org.eventb.core.prRule name="r7" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="⊥ hyp" org.eventb.core.prHyps="p28"/>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
<org.eventb.core.prAnte name="(" org.eventb.core.prGoal="p33" org.eventb.core.prHyps="p32">
<org.eventb.core.prRule name="r8" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="Functional image simplification in goal" org.eventb.core.prGoal="p33" org.eventb.core.prHyps="p1">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p34">
<org.eventb.core.prRule name="r6" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with u=user" org.eventb.core.prHyps="p24">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p20" org.eventb.core.prInfHyps="p29"/>
<org.eventb.core.prHypAction name="FORWARD_INF1" org.eventb.core.prHyps="p22" org.eventb.core.prInfHyps="p30"/>
<org.eventb.core.prHypAction name="DESELECT2" org.eventb.core.prHyps="p20,p22"/>
<org.eventb.core.prRule name="r0" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="generalized MP" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="REWRITE0" org.eventb.core.prHidden="p30" org.eventb.core.prHyps="p32" org.eventb.core.prInfHyps="p35"/>
<org.eventb.core.prRule name="r1" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="simplification rewrites" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="HIDE0" org.eventb.core.prHyps="p35"/>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
<org.eventb.core.prString name=".pos" org.eventb.core.prSValue="0.1"/>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
<org.eventb.core.prString name=".pos" org.eventb.core.prSValue="0.1"/>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
<org.eventb.core.prAnte name="(" org.eventb.core.prGoal="p37" org.eventb.core.prHyps="p36">
<org.eventb.core.prRule name="r5" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="ovr in goal" org.eventb.core.prGoal="p37" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p38" org.eventb.core.prHyps="p26">
<org.eventb.core.prRule name="r8" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="Functional image simplification in goal" org.eventb.core.prGoal="p38" org.eventb.core.prHyps="p1">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p39">
<org.eventb.core.prRule name="r6" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with v=user" org.eventb.core.prHyps="p26">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p21" org.eventb.core.prInfHyps="p29"/>
<org.eventb.core.prHypAction name="DESELECT1" org.eventb.core.prHyps="p21"/>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
<org.eventb.core.prString name=".pos" org.eventb.core.prSValue="0.0"/>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
<org.eventb.core.prAnte name="(" org.eventb.core.prGoal="p40" org.eventb.core.prHyps="p32">
<org.eventb.core.prRule name="r8" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="Functional image simplification in goal" org.eventb.core.prGoal="p40" org.eventb.core.prHyps="p1">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p41">
<org.eventb.core.prRule name="r8" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="Functional image simplification in goal" org.eventb.core.prGoal="p41" org.eventb.core.prHyps="p1">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p42"/>
<org.eventb.core.prString name=".pos" org.eventb.core.prSValue="0.1"/>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
<org.eventb.core.prString name=".pos" org.eventb.core.prSValue="0.0"/>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
<org.eventb.core.prString name=".pos" org.eventb.core.prSValue="0.1"/>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
<org.eventb.core.prString name=".pos" org.eventb.core.prSValue="0.0"/>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
<org.eventb.core.prIdent name="counter" org.eventb.core.type="ℤ"/>
<org.eventb.core.prIdent name="order" org.eventb.core.type="ℙ(users×ℤ)"/>
<org.eventb.core.prIdent name="user" org.eventb.core.type="users"/>
<org.eventb.core.prPred name="p15" org.eventb.core.predicate="∀E⦂ℙ(users)·⊤⇒(∃u⦂users·u∈E∧(∀w⦂users·w∈E⇒priority(w)≤priority(u)))">
<org.eventb.core.prIdent name="priority" org.eventb.core.type="ℙ(users×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p0" org.eventb.core.predicate="∀u⦂users·∀v⦂users·u∈dom(order{user ↦ counter})∧v∈dom(order{user ↦ counter})∧u≠v⇒(order{user ↦ counter})(u)≠(order{user ↦ counter})(v)"/>
<org.eventb.core.prPred name="p34" org.eventb.core.predicate="¬counter=order(v)">
<org.eventb.core.prIdent name="v" org.eventb.core.type="users"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p1" org.eventb.core.predicate="order∈users → ℕ"/>
<org.eventb.core.prPred name="p6" org.eventb.core.predicate="¬leaving=(∅ ⦂ ℙ(users))∨(leaving=(∅ ⦂ ℙ(users))∧card(passengers)&lt;capacity)∨¬users⊆waiting∪passengers∨(leaving=(∅ ⦂ ℙ(users))∧card(passengers)=capacity)∨(leaving=(∅ ⦂ ℙ(users))∧waiting=(∅ ⦂ ℙ(users)))">
<org.eventb.core.prIdent name="capacity" org.eventb.core.type="ℤ"/>
<org.eventb.core.prIdent name="leaving" org.eventb.core.type="ℙ(users)"/>
<org.eventb.core.prIdent name="passengers" org.eventb.core.type="ℙ(users)"/>
<org.eventb.core.prIdent name="waiting" org.eventb.core.type="ℙ(users)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p32" org.eventb.core.predicate="¬v=user">
<org.eventb.core.prIdent name="v" org.eventb.core.type="users"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p36" org.eventb.core.predicate="¬u=user">
<org.eventb.core.prIdent name="u" org.eventb.core.type="users"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p21" org.eventb.core.predicate="v∈dom(order{user ↦ counter})">
<org.eventb.core.prIdent name="v" org.eventb.core.type="users"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p38" org.eventb.core.predicate="¬({user} ⩤ order)(u)=counter">
<org.eventb.core.prIdent name="u" org.eventb.core.type="users"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p11" org.eventb.core.predicate="users ∖ (passengers∪waiting)≠(∅ ⦂ ℙ(users))">
<org.eventb.core.prIdent name="passengers" org.eventb.core.type="ℙ(users)"/>
<org.eventb.core.prIdent name="waiting" org.eventb.core.type="ℙ(users)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p35" org.eventb.core.predicate="¬⊥"/>
<org.eventb.core.prPred name="p13" org.eventb.core.predicate="∀u⦂users,v⦂users·u∈dom(order{user ↦ counter})∧v∈dom(order{user ↦ counter})∧¬u=v⇒¬(order{user ↦ counter})(u)=(order{user ↦ counter})(v)"/>
<org.eventb.core.prPred name="p22" org.eventb.core.predicate="¬u=v">
<org.eventb.core.prIdent name="u" org.eventb.core.type="users"/>
<org.eventb.core.prIdent name="v" org.eventb.core.type="users"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p26" org.eventb.core.predicate="v=user">
<org.eventb.core.prIdent name="v" org.eventb.core.type="users"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p4" org.eventb.core.predicate="finite(passengers)">
<org.eventb.core.prIdent name="passengers" org.eventb.core.type="ℙ(users)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p33" org.eventb.core.predicate="¬counter=({user} ⩤ order)(v)">
<org.eventb.core.prIdent name="v" org.eventb.core.type="users"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p30" org.eventb.core.predicate="¬user=v">
<org.eventb.core.prIdent name="v" org.eventb.core.type="users"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p37" org.eventb.core.predicate="¬({user} ⩤ order)(u)=(order{user ↦ counter})(v)">
<org.eventb.core.prIdent name="u" org.eventb.core.type="users"/>
<org.eventb.core.prIdent name="v" org.eventb.core.type="users"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p39" org.eventb.core.predicate="¬order(u)=counter">
<org.eventb.core.prIdent name="u" org.eventb.core.type="users"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p2" org.eventb.core.predicate="leaving≠(∅ ⦂ ℙ(users))∨((leaving=(∅ ⦂ ℙ(users))⇒finite(passengers))∧((leaving=(∅ ⦂ ℙ(users))∧card(passengers)&lt;capacity)∨users ∖ (waiting∪passengers)≠(∅ ⦂ ℙ(users))∨(leaving=(∅ ⦂ ℙ(users))⇒finite(passengers))))">
<org.eventb.core.prIdent name="capacity" org.eventb.core.type="ℤ"/>
<org.eventb.core.prIdent name="leaving" org.eventb.core.type="ℙ(users)"/>
<org.eventb.core.prIdent name="passengers" org.eventb.core.type="ℙ(users)"/>
<org.eventb.core.prIdent name="waiting" org.eventb.core.type="ℙ(users)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p9" org.eventb.core.predicate="∀u⦂users·∀v⦂users·u∈dom(order)∧v∈dom(order)∧u≠v⇒order(u)≠order(v)"/>
<org.eventb.core.prPred name="p28" org.eventb.core.predicate="⊥"/>
<org.eventb.core.prPred name="p7" org.eventb.core.predicate="waiting≠(∅ ⦂ ℙ(users))⇒(∃u⦂users·∀w⦂users·u∈waiting∧(w∈waiting⇒priority(u)≥priority(w)∧(priority(w)=priority(u)∧w≠u⇒order(u)&lt;order(w))))">
<org.eventb.core.prIdent name="priority" org.eventb.core.type="ℙ(users×ℤ)"/>
<org.eventb.core.prIdent name="waiting" org.eventb.core.type="ℙ(users)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p16" org.eventb.core.predicate="waiting⊆users">
<org.eventb.core.prIdent name="waiting" org.eventb.core.type="ℙ(users)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p40" org.eventb.core.predicate="¬({user} ⩤ order)(u)=({user} ⩤ order)(v)">
<org.eventb.core.prIdent name="u" org.eventb.core.type="users"/>
<org.eventb.core.prIdent name="v" org.eventb.core.type="users"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p25" org.eventb.core.predicate="¬counter=(order{user ↦ counter})(v)">
<org.eventb.core.prIdent name="v" org.eventb.core.type="users"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p19" org.eventb.core.predicate="u∈dom(order{user ↦ counter})∧v∈dom(order{user ↦ counter})∧¬u=v⇒¬(order{user ↦ counter})(u)=(order{user ↦ counter})(v)">
<org.eventb.core.prIdent name="u" org.eventb.core.type="users"/>
<org.eventb.core.prIdent name="v" org.eventb.core.type="users"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p29" org.eventb.core.predicate="user∈dom(order{user ↦ counter})"/>
<org.eventb.core.prPred name="p42" org.eventb.core.predicate="¬order(u)=order(v)">
<org.eventb.core.prIdent name="u" org.eventb.core.type="users"/>
<org.eventb.core.prIdent name="v" org.eventb.core.type="users"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p23" org.eventb.core.predicate="¬(order{user ↦ counter})(u)=(order{user ↦ counter})(v)">
<org.eventb.core.prIdent name="u" org.eventb.core.type="users"/>
<org.eventb.core.prIdent name="v" org.eventb.core.type="users"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p10" org.eventb.core.predicate="∀u⦂users,v⦂users·u∈dom(order)∧v∈dom(order)∧¬u=v⇒¬order(u)=order(v)"/>
<org.eventb.core.prPred name="p14" org.eventb.core.predicate="∀E⦂ℙ(users)·E⊆users⇒(∃u⦂users·u∈E∧(∀w⦂users·w∈E⇒priority(w)≤priority(u)))">
<org.eventb.core.prIdent name="priority" org.eventb.core.type="ℙ(users×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p24" org.eventb.core.predicate="u=user">
<org.eventb.core.prIdent name="u" org.eventb.core.type="users"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p18" org.eventb.core.predicate="∀E⦂ℙ(users)·∃u⦂users·u∈E∧(∀w⦂users·w∈E⇒priority(w)≤priority(u))">
<org.eventb.core.prIdent name="priority" org.eventb.core.type="ℙ(users×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p5" org.eventb.core.predicate="leaving≠(∅ ⦂ ℙ(users))∨(leaving=(∅ ⦂ ℙ(users))∧card(passengers)&lt;capacity)∨users ∖ (waiting∪passengers)≠(∅ ⦂ ℙ(users))∨(leaving=(∅ ⦂ ℙ(users))∧card(passengers)=capacity)∨(leaving=(∅ ⦂ ℙ(users))∧waiting=(∅ ⦂ ℙ(users)))">
<org.eventb.core.prIdent name="capacity" org.eventb.core.type="ℤ"/>
<org.eventb.core.prIdent name="leaving" org.eventb.core.type="ℙ(users)"/>
<org.eventb.core.prIdent name="passengers" org.eventb.core.type="ℙ(users)"/>
<org.eventb.core.prIdent name="waiting" org.eventb.core.type="ℙ(users)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p8" org.eventb.core.predicate="¬waiting=(∅ ⦂ ℙ(users))⇒(∃u⦂users·u∈waiting∧(∀w⦂users·w∈waiting⇒priority(u)≥priority(w)∧(priority(w)=priority(u)∧¬w=u⇒order(u)&lt;order(w))))">
<org.eventb.core.prIdent name="priority" org.eventb.core.type="ℙ(users×ℤ)"/>
<org.eventb.core.prIdent name="waiting" org.eventb.core.type="ℙ(users)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p12" org.eventb.core.predicate="¬users⊆passengers∪waiting">
<org.eventb.core.prIdent name="passengers" org.eventb.core.type="ℙ(users)"/>
<org.eventb.core.prIdent name="waiting" org.eventb.core.type="ℙ(users)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p3" org.eventb.core.predicate="leaving≠(∅ ⦂ ℙ(users))∨((leaving=(∅ ⦂ ℙ(users))⇒⊤)∧((leaving=(∅ ⦂ ℙ(users))∧card(passengers)&lt;capacity)∨users ∖ (waiting∪passengers)≠(∅ ⦂ ℙ(users))∨(leaving=(∅ ⦂ ℙ(users))⇒⊤)))">
<org.eventb.core.prIdent name="capacity" org.eventb.core.type="ℤ"/>
<org.eventb.core.prIdent name="leaving" org.eventb.core.type="ℙ(users)"/>
<org.eventb.core.prIdent name="passengers" org.eventb.core.type="ℙ(users)"/>
<org.eventb.core.prIdent name="waiting" org.eventb.core.type="ℙ(users)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p27" org.eventb.core.predicate="¬counter=counter"/>
<org.eventb.core.prPred name="p20" org.eventb.core.predicate="u∈dom(order{user ↦ counter})">
<org.eventb.core.prIdent name="u" org.eventb.core.type="users"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p17" org.eventb.core.predicate="passengers⊆users">
<org.eventb.core.prIdent name="passengers" org.eventb.core.type="ℙ(users)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p41" org.eventb.core.predicate="¬order(u)=({user} ⩤ order)(v)">
<org.eventb.core.prIdent name="u" org.eventb.core.type="users"/>
<org.eventb.core.prIdent name="v" org.eventb.core.type="users"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p31" org.eventb.core.predicate="¬⊤"/>
<org.eventb.core.prReas name="r5" org.eventb.core.prRID="org.eventb.core.seqprover.funOvr:1"/>
<org.eventb.core.prReas name="r8" org.eventb.core.prRID="org.eventb.core.seqprover.funImgSimplifies:0"/>
<org.eventb.core.prReas name="r2" org.eventb.core.prRID="org.eventb.core.seqprover.typeRewrites:1"/>
<org.eventb.core.prReas name="r0" org.eventb.core.prRID="org.eventb.core.seqprover.genMPL2"/>
<org.eventb.core.prReas name="r3" org.eventb.core.prRID="org.eventb.core.seqprover.allI"/>
<org.eventb.core.prReas name="r1" org.eventb.core.prRID="org.eventb.core.seqprover.autoRewritesL4:0"/>
<org.eventb.core.prReas name="r6" org.eventb.core.prRID="org.eventb.core.seqprover.eq:1"/>
<org.eventb.core.prReas name="r7" org.eventb.core.prRID="org.eventb.core.seqprover.falseHyp"/>
<org.eventb.core.prReas name="r4" org.eventb.core.prRID="org.eventb.core.seqprover.impI"/>
</org.eventb.core.prProof>
<org.eventb.core.prProof name="USER_ENTERS/NBLOCK/INV" org.eventb.core.confidence="0" org.eventb.core.prFresh="" org.eventb.core.prGoal="p0" org.eventb.core.prHyps="p1" org.eventb.core.prSets="users">
<org.eventb.core.lang name="L"/>
<org.eventb.core.prRule name="r0" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="generalized MP" org.eventb.core.prGoal="p0" org.eventb.core.prHyps="p1">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p12">
<org.eventb.core.prHypAction name="REWRITE0" org.eventb.core.prHidden="p2" org.eventb.core.prHyps="p1" org.eventb.core.prInfHyps="p3"/>
<org.eventb.core.prHypAction name="REWRITE1" org.eventb.core.prHidden="p4" org.eventb.core.prHyps="p1,p6" org.eventb.core.prInfHyps="p5"/>
<org.eventb.core.prHypAction name="REWRITE2" org.eventb.core.prHidden="p7" org.eventb.core.prHyps="p9" org.eventb.core.prInfHyps="p8"/>
<org.eventb.core.prHypAction name="REWRITE3" org.eventb.core.prHidden="p10" org.eventb.core.prHyps="p1" org.eventb.core.prInfHyps="p11"/>
<org.eventb.core.prRule name="r1" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="simplification rewrites" org.eventb.core.prGoal="p12" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p21">
<org.eventb.core.prHypAction name="REWRITE0" org.eventb.core.prHidden="p13" org.eventb.core.prHyps="" org.eventb.core.prInfHyps="p14"/>
<org.eventb.core.prHypAction name="REWRITE1" org.eventb.core.prHidden="p9" org.eventb.core.prHyps="" org.eventb.core.prInfHyps="p15"/>
<org.eventb.core.prHypAction name="REWRITE2" org.eventb.core.prHidden="p16" org.eventb.core.prHyps="" org.eventb.core.prInfHyps="p17"/>
<org.eventb.core.prHypAction name="REWRITE3" org.eventb.core.prHidden="p3" org.eventb.core.prHyps="" org.eventb.core.prInfHyps="p18"/>
<org.eventb.core.prHypAction name="HIDE4" org.eventb.core.prHyps="p5"/>
<org.eventb.core.prHypAction name="REWRITE5" org.eventb.core.prHidden="p8" org.eventb.core.prHyps="" org.eventb.core.prInfHyps="p19"/>
<org.eventb.core.prHypAction name="REWRITE6" org.eventb.core.prHidden="p11" org.eventb.core.prHyps="" org.eventb.core.prInfHyps="p6,p20"/>
<org.eventb.core.prRule name="r0" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="generalized MP" org.eventb.core.prGoal="p21" org.eventb.core.prHyps="p1">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p24">
<org.eventb.core.prHypAction name="REWRITE0" org.eventb.core.prHidden="p18" org.eventb.core.prHyps="p15" org.eventb.core.prInfHyps="p22"/>
<org.eventb.core.prHypAction name="REWRITE1" org.eventb.core.prHidden="p20" org.eventb.core.prHyps="p6" org.eventb.core.prInfHyps="p23"/>
<org.eventb.core.prRule name="r1" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="simplification rewrites" org.eventb.core.prGoal="p24" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p26">
<org.eventb.core.prHypAction name="REWRITE0" org.eventb.core.prHidden="p22" org.eventb.core.prHyps="" org.eventb.core.prInfHyps="p25"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p23"/>
<org.eventb.core.prRule name="r2" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="type rewrites" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="REWRITE0" org.eventb.core.prHidden="p27" org.eventb.core.prHyps="" org.eventb.core.prInfHyps="p28"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p29"/>
<org.eventb.core.prHypAction name="HIDE2" org.eventb.core.prHyps="p30"/>
<org.eventb.core.prRule name="r1" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="simplification rewrites" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="REWRITE0" org.eventb.core.prHidden="p28" org.eventb.core.prHyps="" org.eventb.core.prInfHyps="p31"/>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
<org.eventb.core.prIdent name="capacity" org.eventb.core.type="ℤ"/>
<org.eventb.core.prIdent name="leaving" org.eventb.core.type="ℙ(users)"/>
<org.eventb.core.prIdent name="passengers" org.eventb.core.type="ℙ(users)"/>
<org.eventb.core.prIdent name="user" org.eventb.core.type="users"/>
<org.eventb.core.prIdent name="waiting" org.eventb.core.type="ℙ(users)"/>
<org.eventb.core.prPred name="p16" org.eventb.core.predicate="∀u⦂users·u∈waiting∧u≠user∧priority(u)=priority(user)⇒order(u)&lt;order(user)">
<org.eventb.core.prIdent name="order" org.eventb.core.type="ℙ(users×ℤ)"/>
<org.eventb.core.prIdent name="priority" org.eventb.core.type="ℙ(users×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p28" org.eventb.core.predicate="∀E⦂ℙ(users)·⊤⇒(∃u⦂users·u∈E∧(∀w⦂users·w∈E⇒priority(w)≤priority(u)))">
<org.eventb.core.prIdent name="priority" org.eventb.core.type="ℙ(users×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p3" org.eventb.core.predicate="⊥∨(⊤∧card(passengers)&lt;capacity)∨users ∖ (waiting∪passengers)≠(∅ ⦂ ℙ(users))∨(⊤∧card(passengers)=capacity)∨(⊤∧waiting=(∅ ⦂ ℙ(users)))"/>
<org.eventb.core.prPred name="p1" org.eventb.core.predicate="leaving=(∅ ⦂ ℙ(users))"/>
<org.eventb.core.prPred name="p11" org.eventb.core.predicate="⊥∨((⊤⇒finite(passengers∪{user}))∧(⊥∨users ∖ ((waiting ∖ {user})∪passengers∪{user})≠(∅ ⦂ ℙ(users))∨(⊤⇒finite(passengers∪{user}))))"/>
<org.eventb.core.prPred name="p18" org.eventb.core.predicate="card(passengers)&lt;capacity∨¬users⊆waiting∪passengers∨card(passengers)=capacity∨waiting=(∅ ⦂ ℙ(users))"/>
<org.eventb.core.prPred name="p6" org.eventb.core.predicate="finite(passengers)"/>
<org.eventb.core.prPred name="p5" org.eventb.core.predicate="⊥∨((⊤⇒⊤)∧((⊤∧card(passengers)&lt;capacity)∨users ∖ (waiting∪passengers)≠(∅ ⦂ ℙ(users))∨(⊤⇒⊤)))"/>
<org.eventb.core.prPred name="p4" org.eventb.core.predicate="leaving≠(∅ ⦂ ℙ(users))∨((leaving=(∅ ⦂ ℙ(users))⇒finite(passengers))∧((leaving=(∅ ⦂ ℙ(users))∧card(passengers)&lt;capacity)∨users ∖ (waiting∪passengers)≠(∅ ⦂ ℙ(users))∨(leaving=(∅ ⦂ ℙ(users))⇒finite(passengers))))"/>
<org.eventb.core.prPred name="p26" org.eventb.core.predicate="card(passengers)+1 − card(passengers∩{user})&lt;capacity∨¬users⊆(waiting ∖ {user})∪passengers∪{user}∨card(passengers)+1 − card(passengers∩{user})=capacity∨waiting⊆{user}"/>
<org.eventb.core.prPred name="p13" org.eventb.core.predicate="∀u⦂users·∀v⦂users·u∈dom(order)∧v∈dom(order)∧u≠v⇒order(u)≠order(v)">
<org.eventb.core.prIdent name="order" org.eventb.core.type="ℙ(users×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p10" org.eventb.core.predicate="leaving≠(∅ ⦂ ℙ(users))∨((leaving=(∅ ⦂ ℙ(users))⇒finite(passengers∪{user}))∧((leaving=(∅ ⦂ ℙ(users))∧card(passengers∪{user})&lt;capacity)∨users ∖ ((waiting ∖ {user})∪passengers∪{user})≠(∅ ⦂ ℙ(users))∨(leaving=(∅ ⦂ ℙ(users))⇒finite(passengers∪{user}))))"/>
<org.eventb.core.prPred name="p7" org.eventb.core.predicate="waiting≠(∅ ⦂ ℙ(users))⇒(∃u⦂users·∀w⦂users·u∈waiting∧(w∈waiting⇒priority(u)≥priority(w)∧(priority(w)=priority(u)∧w≠u⇒order(u)&lt;order(w))))">
<org.eventb.core.prIdent name="order" org.eventb.core.type="ℙ(users×ℤ)"/>
<org.eventb.core.prIdent name="priority" org.eventb.core.type="ℙ(users×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p29" org.eventb.core.predicate="waiting⊆users"/>
<org.eventb.core.prPred name="p8" org.eventb.core.predicate="⊤⇒(∃u⦂users·∀w⦂users·u∈waiting∧(w∈waiting⇒priority(u)≥priority(w)∧(priority(w)=priority(u)∧w≠u⇒order(u)&lt;order(w))))">
<org.eventb.core.prIdent name="order" org.eventb.core.type="ℙ(users×ℤ)"/>
<org.eventb.core.prIdent name="priority" org.eventb.core.type="ℙ(users×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p21" org.eventb.core.predicate="¬leaving=(∅ ⦂ ℙ(users))∨card(passengers)+1 − card(passengers∩{user})&lt;capacity∨¬users⊆(waiting ∖ {user})∪passengers∪{user}∨card(passengers)+1 − card(passengers∩{user})=capacity∨waiting⊆{user}"/>
<org.eventb.core.prPred name="p14" org.eventb.core.predicate="∀u⦂users,v⦂users·u∈dom(order)∧v∈dom(order)∧¬u=v⇒¬order(u)=order(v)">
<org.eventb.core.prIdent name="order" org.eventb.core.type="ℙ(users×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p27" org.eventb.core.predicate="∀E⦂ℙ(users)·E⊆users⇒(∃u⦂users·u∈E∧(∀w⦂users·w∈E⇒priority(w)≤priority(u)))">
<org.eventb.core.prIdent name="priority" org.eventb.core.type="ℙ(users×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p15" org.eventb.core.predicate="¬waiting=(∅ ⦂ ℙ(users))"/>
<org.eventb.core.prPred name="p31" org.eventb.core.predicate="∀E⦂ℙ(users)·∃u⦂users·u∈E∧(∀w⦂users·w∈E⇒priority(w)≤priority(u))">
<org.eventb.core.prIdent name="priority" org.eventb.core.type="ℙ(users×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p23" org.eventb.core.predicate="¬⊤∨⊤"/>
<org.eventb.core.prPred name="p25" org.eventb.core.predicate="card(passengers)&lt;capacity∨¬users⊆waiting∪passengers∨card(passengers)=capacity"/>
<org.eventb.core.prPred name="p17" org.eventb.core.predicate="∀u⦂users·u∈waiting∧¬u=user∧priority(u)=priority(user)⇒order(u)&lt;order(user)">
<org.eventb.core.prIdent name="order" org.eventb.core.type="ℙ(users×ℤ)"/>
<org.eventb.core.prIdent name="priority" org.eventb.core.type="ℙ(users×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p22" org.eventb.core.predicate="card(passengers)&lt;capacity∨¬users⊆waiting∪passengers∨card(passengers)=capacity∨⊥"/>
<org.eventb.core.prPred name="p0" org.eventb.core.predicate="leaving≠(∅ ⦂ ℙ(users))∨(leaving=(∅ ⦂ ℙ(users))∧card(passengers∪{user})&lt;capacity)∨users ∖ ((waiting ∖ {user})∪(passengers∪{user}))≠(∅ ⦂ ℙ(users))∨(leaving=(∅ ⦂ ℙ(users))∧card(passengers∪{user})=capacity)∨(leaving=(∅ ⦂ ℙ(users))∧waiting ∖ {user}=(∅ ⦂ ℙ(users)))"/>
<org.eventb.core.prPred name="p2" org.eventb.core.predicate="leaving≠(∅ ⦂ ℙ(users))∨(leaving=(∅ ⦂ ℙ(users))∧card(passengers)&lt;capacity)∨users ∖ (waiting∪passengers)≠(∅ ⦂ ℙ(users))∨(leaving=(∅ ⦂ ℙ(users))∧card(passengers)=capacity)∨(leaving=(∅ ⦂ ℙ(users))∧waiting=(∅ ⦂ ℙ(users)))"/>
<org.eventb.core.prPred name="p9" org.eventb.core.predicate="waiting≠(∅ ⦂ ℙ(users))"/>
<org.eventb.core.prPred name="p19" org.eventb.core.predicate="∃u⦂users·u∈waiting∧(∀w⦂users·w∈waiting⇒priority(u)≥priority(w)∧(priority(w)=priority(u)∧¬w=u⇒order(u)&lt;order(w)))">
<org.eventb.core.prIdent name="order" org.eventb.core.type="ℙ(users×ℤ)"/>
<org.eventb.core.prIdent name="priority" org.eventb.core.type="ℙ(users×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p12" org.eventb.core.predicate="leaving≠(∅ ⦂ ℙ(users))∨(⊤∧card(passengers∪{user})&lt;capacity)∨users ∖ ((waiting ∖ {user})∪(passengers∪{user}))≠(∅ ⦂ ℙ(users))∨(⊤∧card(passengers∪{user})=capacity)∨(⊤∧waiting ∖ {user}=(∅ ⦂ ℙ(users)))"/>
<org.eventb.core.prPred name="p24" org.eventb.core.predicate="¬⊤∨card(passengers)+1 − card(passengers∩{user})&lt;capacity∨¬users⊆(waiting ∖ {user})∪passengers∪{user}∨card(passengers)+1 − card(passengers∩{user})=capacity∨waiting⊆{user}"/>
<org.eventb.core.prPred name="p20" org.eventb.core.predicate="¬users⊆(waiting ∖ {user})∪passengers∪{user}∨finite(passengers)"/>
<org.eventb.core.prPred name="p30" org.eventb.core.predicate="passengers⊆users"/>
<org.eventb.core.prReas name="r2" org.eventb.core.prRID="org.eventb.core.seqprover.typeRewrites:1"/>
<org.eventb.core.prReas name="r0" org.eventb.core.prRID="org.eventb.core.seqprover.genMPL2"/>
<org.eventb.core.prReas name="r1" org.eventb.core.prRID="org.eventb.core.seqprover.autoRewritesL4:0"/>
</org.eventb.core.prProof>
<org.eventb.core.prProof name="USER_ENTERS/NBLOCKPRIORITY/INV" org.eventb.core.confidence="0" org.eventb.core.prFresh="" org.eventb.core.prGoal="p0" org.eventb.core.prHyps="" org.eventb.core.prSets="users">
<org.eventb.core.lang name="L"/>
<org.eventb.core.prRule name="r0" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="generalized MP" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="REWRITE0" org.eventb.core.prHidden="p1" org.eventb.core.prHyps="p3" org.eventb.core.prInfHyps="p2"/>
<org.eventb.core.prHypAction name="REWRITE1" org.eventb.core.prHidden="p4" org.eventb.core.prHyps="p3,p6" org.eventb.core.prInfHyps="p5"/>
<org.eventb.core.prHypAction name="REWRITE2" org.eventb.core.prHidden="p7" org.eventb.core.prHyps="p9" org.eventb.core.prInfHyps="p8"/>
<org.eventb.core.prRule name="r1" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="simplification rewrites" org.eventb.core.prGoal="p0" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p17">
<org.eventb.core.prHypAction name="REWRITE0" org.eventb.core.prHidden="p10" org.eventb.core.prHyps="" org.eventb.core.prInfHyps="p11"/>
<org.eventb.core.prHypAction name="REWRITE1" org.eventb.core.prHidden="p9" org.eventb.core.prHyps="" org.eventb.core.prInfHyps="p12"/>
<org.eventb.core.prHypAction name="REWRITE2" org.eventb.core.prHidden="p13" org.eventb.core.prHyps="" org.eventb.core.prInfHyps="p14"/>
<org.eventb.core.prHypAction name="REWRITE3" org.eventb.core.prHidden="p2" org.eventb.core.prHyps="" org.eventb.core.prInfHyps="p15"/>
<org.eventb.core.prHypAction name="HIDE4" org.eventb.core.prHyps="p5"/>
<org.eventb.core.prHypAction name="REWRITE5" org.eventb.core.prHidden="p8" org.eventb.core.prHyps="" org.eventb.core.prInfHyps="p16"/>
<org.eventb.core.prRule name="r0" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="generalized MP" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="REWRITE0" org.eventb.core.prHidden="p15" org.eventb.core.prHyps="p3,p12" org.eventb.core.prInfHyps="p18"/>
<org.eventb.core.prRule name="r1" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="simplification rewrites" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="REWRITE0" org.eventb.core.prHidden="p18" org.eventb.core.prHyps="" org.eventb.core.prInfHyps="p19"/>
<org.eventb.core.prRule name="r2" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="type rewrites" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="REWRITE0" org.eventb.core.prHidden="p20" org.eventb.core.prHyps="" org.eventb.core.prInfHyps="p21"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p22"/>
<org.eventb.core.prHypAction name="HIDE2" org.eventb.core.prHyps="p23"/>
<org.eventb.core.prRule name="r1" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="simplification rewrites" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="REWRITE0" org.eventb.core.prHidden="p21" org.eventb.core.prHyps="" org.eventb.core.prInfHyps="p24"/>
<org.eventb.core.prRule name="r3" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="⇒ goal" org.eventb.core.prGoal="p17" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p26" org.eventb.core.prHyps="p25"/>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
<org.eventb.core.prIdent name="order" org.eventb.core.type="ℙ(users×ℤ)"/>
<org.eventb.core.prIdent name="priority" org.eventb.core.type="ℙ(users×ℤ)"/>
<org.eventb.core.prIdent name="user" org.eventb.core.type="users"/>
<org.eventb.core.prIdent name="waiting" org.eventb.core.type="ℙ(users)"/>
<org.eventb.core.prPred name="p13" org.eventb.core.predicate="∀u⦂users·u∈waiting∧u≠user∧priority(u)=priority(user)⇒order(u)&lt;order(user)"/>
<org.eventb.core.prPred name="p21" org.eventb.core.predicate="∀E⦂ℙ(users)·⊤⇒(∃u⦂users·u∈E∧(∀w⦂users·w∈E⇒priority(w)≤priority(u)))"/>
<org.eventb.core.prPred name="p15" org.eventb.core.predicate="¬leaving=(∅ ⦂ ℙ(users))∨card(passengers)&lt;capacity∨¬users⊆waiting∪passengers∨card(passengers)=capacity∨waiting=(∅ ⦂ ℙ(users))">
<org.eventb.core.prIdent name="capacity" org.eventb.core.type="ℤ"/>
<org.eventb.core.prIdent name="leaving" org.eventb.core.type="ℙ(users)"/>
<org.eventb.core.prIdent name="passengers" org.eventb.core.type="ℙ(users)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p3" org.eventb.core.predicate="leaving=(∅ ⦂ ℙ(users))">
<org.eventb.core.prIdent name="leaving" org.eventb.core.type="ℙ(users)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p17" org.eventb.core.predicate="¬waiting⊆{user}⇒(∃u⦂users·u∈waiting ∖ {user}∧(∀w⦂users·w∈waiting ∖ {user}⇒priority(u)≥priority(w)∧(priority(w)=priority(u)∧¬w=u⇒order(u)&lt;order(w))))"/>
<org.eventb.core.prPred name="p18" org.eventb.core.predicate="¬⊤∨card(passengers)&lt;capacity∨¬users⊆waiting∪passengers∨card(passengers)=capacity∨⊥">
<org.eventb.core.prIdent name="capacity" org.eventb.core.type="ℤ"/>
<org.eventb.core.prIdent name="passengers" org.eventb.core.type="ℙ(users)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p6" org.eventb.core.predicate="finite(passengers)">
<org.eventb.core.prIdent name="passengers" org.eventb.core.type="ℙ(users)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p26" org.eventb.core.predicate="∃u⦂users·u∈waiting ∖ {user}∧(∀w⦂users·w∈waiting ∖ {user}⇒priority(u)≥priority(w)∧(priority(w)=priority(u)∧¬w=u⇒order(u)&lt;order(w)))"/>
<org.eventb.core.prPred name="p4" org.eventb.core.predicate="leaving≠(∅ ⦂ ℙ(users))∨((leaving=(∅ ⦂ ℙ(users))⇒finite(passengers))∧((leaving=(∅ ⦂ ℙ(users))∧card(passengers)&lt;capacity)∨users ∖ (waiting∪passengers)≠(∅ ⦂ ℙ(users))∨(leaving=(∅ ⦂ ℙ(users))⇒finite(passengers))))">
<org.eventb.core.prIdent name="capacity" org.eventb.core.type="ℤ"/>
<org.eventb.core.prIdent name="leaving" org.eventb.core.type="ℙ(users)"/>
<org.eventb.core.prIdent name="passengers" org.eventb.core.type="ℙ(users)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p10" org.eventb.core.predicate="∀u⦂users·∀v⦂users·u∈dom(order)∧v∈dom(order)∧u≠v⇒order(u)≠order(v)"/>
<org.eventb.core.prPred name="p7" org.eventb.core.predicate="waiting≠(∅ ⦂ ℙ(users))⇒(∃u⦂users·∀w⦂users·u∈waiting∧(w∈waiting⇒priority(u)≥priority(w)∧(priority(w)=priority(u)∧w≠u⇒order(u)&lt;order(w))))"/>
<org.eventb.core.prPred name="p22" org.eventb.core.predicate="waiting⊆users"/>
<org.eventb.core.prPred name="p0" org.eventb.core.predicate="waiting ∖ {user}≠(∅ ⦂ ℙ(users))⇒(∃u⦂users·∀w⦂users·u∈waiting ∖ {user}∧(w∈waiting ∖ {user}⇒priority(u)≥priority(w)∧(priority(w)=priority(u)∧w≠u⇒order(u)&lt;order(w))))"/>
<org.eventb.core.prPred name="p8" org.eventb.core.predicate="⊤⇒(∃u⦂users·∀w⦂users·u∈waiting∧(w∈waiting⇒priority(u)≥priority(w)∧(priority(w)=priority(u)∧w≠u⇒order(u)&lt;order(w))))"/>
<org.eventb.core.prPred name="p11" org.eventb.core.predicate="∀u⦂users,v⦂users·u∈dom(order)∧v∈dom(order)∧¬u=v⇒¬order(u)=order(v)"/>
<org.eventb.core.prPred name="p20" org.eventb.core.predicate="∀E⦂ℙ(users)·E⊆users⇒(∃u⦂users·u∈E∧(∀w⦂users·w∈E⇒priority(w)≤priority(u)))"/>
<org.eventb.core.prPred name="p12" org.eventb.core.predicate="¬waiting=(∅ ⦂ ℙ(users))"/>
<org.eventb.core.prPred name="p24" org.eventb.core.predicate="∀E⦂ℙ(users)·∃u⦂users·u∈E∧(∀w⦂users·w∈E⇒priority(w)≤priority(u))"/>
<org.eventb.core.prPred name="p25" org.eventb.core.predicate="¬waiting⊆{user}"/>
<org.eventb.core.prPred name="p19" org.eventb.core.predicate="card(passengers)&lt;capacity∨¬users⊆waiting∪passengers∨card(passengers)=capacity">
<org.eventb.core.prIdent name="capacity" org.eventb.core.type="ℤ"/>
<org.eventb.core.prIdent name="passengers" org.eventb.core.type="ℙ(users)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p14" org.eventb.core.predicate="∀u⦂users·u∈waiting∧¬u=user∧priority(u)=priority(user)⇒order(u)&lt;order(user)"/>
<org.eventb.core.prPred name="p5" org.eventb.core.predicate="leaving≠(∅ ⦂ ℙ(users))∨((⊤⇒⊤)∧((⊤∧card(passengers)&lt;capacity)∨users ∖ (waiting∪passengers)≠(∅ ⦂ ℙ(users))∨(⊤⇒⊤)))">
<org.eventb.core.prIdent name="capacity" org.eventb.core.type="ℤ"/>
<org.eventb.core.prIdent name="leaving" org.eventb.core.type="ℙ(users)"/>
<org.eventb.core.prIdent name="passengers" org.eventb.core.type="ℙ(users)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p2" org.eventb.core.predicate="leaving≠(∅ ⦂ ℙ(users))∨(⊤∧card(passengers)&lt;capacity)∨users ∖ (waiting∪passengers)≠(∅ ⦂ ℙ(users))∨(⊤∧card(passengers)=capacity)∨(⊤∧waiting=(∅ ⦂ ℙ(users)))">
<org.eventb.core.prIdent name="capacity" org.eventb.core.type="ℤ"/>
<org.eventb.core.prIdent name="leaving" org.eventb.core.type="ℙ(users)"/>
<org.eventb.core.prIdent name="passengers" org.eventb.core.type="ℙ(users)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p1" org.eventb.core.predicate="leaving≠(∅ ⦂ ℙ(users))∨(leaving=(∅ ⦂ ℙ(users))∧card(passengers)&lt;capacity)∨users ∖ (waiting∪passengers)≠(∅ ⦂ ℙ(users))∨(leaving=(∅ ⦂ ℙ(users))∧card(passengers)=capacity)∨(leaving=(∅ ⦂ ℙ(users))∧waiting=(∅ ⦂ ℙ(users)))">
<org.eventb.core.prIdent name="capacity" org.eventb.core.type="ℤ"/>
<org.eventb.core.prIdent name="leaving" org.eventb.core.type="ℙ(users)"/>
<org.eventb.core.prIdent name="passengers" org.eventb.core.type="ℙ(users)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p9" org.eventb.core.predicate="waiting≠(∅ ⦂ ℙ(users))"/>
<org.eventb.core.prPred name="p16" org.eventb.core.predicate="∃u⦂users·u∈waiting∧(∀w⦂users·w∈waiting⇒priority(u)≥priority(w)∧(priority(w)=priority(u)∧¬w=u⇒order(u)&lt;order(w)))"/>
<org.eventb.core.prPred name="p23" org.eventb.core.predicate="passengers⊆users">
<org.eventb.core.prIdent name="passengers" org.eventb.core.type="ℙ(users)"/>
</org.eventb.core.prPred>
<org.eventb.core.prReas name="r2" org.eventb.core.prRID="org.eventb.core.seqprover.typeRewrites:1"/>
<org.eventb.core.prReas name="r0" org.eventb.core.prRID="org.eventb.core.seqprover.genMPL2"/>
<org.eventb.core.prReas name="r1" org.eventb.core.prRID="org.eventb.core.seqprover.autoRewritesL4:0"/>
<org.eventb.core.prReas name="r3" org.eventb.core.prRID="org.eventb.core.seqprover.impI"/>
</org.eventb.core.prProof>
<org.eventb.core.prProof name="USER_LEAVES/NBLOCK/INV" org.eventb.core.confidence="0" org.eventb.core.prFresh="" org.eventb.core.prGoal="p0" org.eventb.core.prHyps="" org.eventb.core.prSets="users">
<org.eventb.core.lang name="L"/>
<org.eventb.core.prRule name="r0" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="generalized MP" org.eventb.core.prGoal="p0" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p0">
<org.eventb.core.prHypAction name="REWRITE0" org.eventb.core.prHidden="p1" org.eventb.core.prHyps="p3" org.eventb.core.prInfHyps="p2"/>
<org.eventb.core.prHypAction name="REWRITE1" org.eventb.core.prHidden="p4" org.eventb.core.prHyps="p3,p6" org.eventb.core.prInfHyps="p5"/>
<org.eventb.core.prHypAction name="REWRITE2" org.eventb.core.prHidden="p7" org.eventb.core.prHyps="" org.eventb.core.prInfHyps="p8"/>
<org.eventb.core.prRule name="r1" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="simplification rewrites" org.eventb.core.prGoal="p0" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p17">
<org.eventb.core.prHypAction name="REWRITE0" org.eventb.core.prHidden="p9" org.eventb.core.prHyps="" org.eventb.core.prInfHyps="p10"/>
<org.eventb.core.prHypAction name="REWRITE1" org.eventb.core.prHidden="p11" org.eventb.core.prHyps="" org.eventb.core.prInfHyps="p12"/>
<org.eventb.core.prHypAction name="REWRITE2" org.eventb.core.prHidden="p13" org.eventb.core.prHyps="" org.eventb.core.prInfHyps="p14"/>
<org.eventb.core.prHypAction name="REWRITE3" org.eventb.core.prHidden="p3" org.eventb.core.prHyps="" org.eventb.core.prInfHyps="p15"/>
<org.eventb.core.prHypAction name="HIDE4" org.eventb.core.prHyps="p2"/>
<org.eventb.core.prHypAction name="HIDE5" org.eventb.core.prHyps="p5"/>
<org.eventb.core.prHypAction name="REWRITE6" org.eventb.core.prHidden="p8" org.eventb.core.prHyps="" org.eventb.core.prInfHyps="p16"/>
<org.eventb.core.prRule name="r0" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="generalized MP" org.eventb.core.prGoal="p17" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p17">
<org.eventb.core.prHypAction name="REWRITE0" org.eventb.core.prHidden="p16" org.eventb.core.prHyps="" org.eventb.core.prInfHyps="p18"/>
<org.eventb.core.prRule name="r1" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="simplification rewrites" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="REWRITE0" org.eventb.core.prHidden="p18" org.eventb.core.prHyps="" org.eventb.core.prInfHyps="p19"/>
<org.eventb.core.prRule name="r2" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="type rewrites" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="REWRITE0" org.eventb.core.prHidden="p20" org.eventb.core.prHyps="" org.eventb.core.prInfHyps="p21"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p22"/>
<org.eventb.core.prHypAction name="HIDE2" org.eventb.core.prHyps="p23"/>
<org.eventb.core.prRule name="r1" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="simplification rewrites" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="REWRITE0" org.eventb.core.prHidden="p21" org.eventb.core.prHyps="" org.eventb.core.prInfHyps="p24"/>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
<org.eventb.core.prIdent name="capacity" org.eventb.core.type="ℤ"/>
<org.eventb.core.prIdent name="leaving" org.eventb.core.type="ℙ(users)"/>
<org.eventb.core.prIdent name="passengers" org.eventb.core.type="ℙ(users)"/>
<org.eventb.core.prIdent name="user" org.eventb.core.type="users"/>
<org.eventb.core.prIdent name="waiting" org.eventb.core.type="ℙ(users)"/>
<org.eventb.core.prPred name="p21" org.eventb.core.predicate="∀E⦂ℙ(users)·⊤⇒(∃u⦂users·u∈E∧(∀w⦂users·w∈E⇒priority(w)≤priority(u)))">
<org.eventb.core.prIdent name="priority" org.eventb.core.type="ℙ(users×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p18" org.eventb.core.predicate="⊤⇒finite(passengers ∖ {user})"/>
<org.eventb.core.prPred name="p3" org.eventb.core.predicate="leaving≠(∅ ⦂ ℙ(users))"/>
<org.eventb.core.prPred name="p13" org.eventb.core.predicate="passengers≠(∅ ⦂ ℙ(users))"/>
<org.eventb.core.prPred name="p7" org.eventb.core.predicate="leaving ∖ {user}≠(∅ ⦂ ℙ(users))∨((leaving ∖ {user}=(∅ ⦂ ℙ(users))⇒finite(passengers ∖ {user}))∧((leaving ∖ {user}=(∅ ⦂ ℙ(users))∧card(passengers ∖ {user})&lt;capacity)∨users ∖ (waiting∪(passengers ∖ {user}))≠(∅ ⦂ ℙ(users))∨(leaving ∖ {user}=(∅ ⦂ ℙ(users))⇒finite(passengers ∖ {user}))))"/>
<org.eventb.core.prPred name="p6" org.eventb.core.predicate="finite(passengers)"/>
<org.eventb.core.prPred name="p14" org.eventb.core.predicate="¬passengers=(∅ ⦂ ℙ(users))"/>
<org.eventb.core.prPred name="p4" org.eventb.core.predicate="leaving≠(∅ ⦂ ℙ(users))∨((leaving=(∅ ⦂ ℙ(users))⇒finite(passengers))∧((leaving=(∅ ⦂ ℙ(users))∧card(passengers)&lt;capacity)∨users ∖ (waiting∪passengers)≠(∅ ⦂ ℙ(users))∨(leaving=(∅ ⦂ ℙ(users))⇒finite(passengers))))"/>
<org.eventb.core.prPred name="p0" org.eventb.core.predicate="leaving ∖ {user}≠(∅ ⦂ ℙ(users))∨(leaving ∖ {user}=(∅ ⦂ ℙ(users))∧card(passengers ∖ {user})&lt;capacity)∨users ∖ (waiting∪(passengers ∖ {user}))≠(∅ ⦂ ℙ(users))∨(leaving ∖ {user}=(∅ ⦂ ℙ(users))∧card(passengers ∖ {user})=capacity)∨(leaving ∖ {user}=(∅ ⦂ ℙ(users))∧waiting=(∅ ⦂ ℙ(users)))"/>
<org.eventb.core.prPred name="p11" org.eventb.core.predicate="∀u⦂users·∀v⦂users·u∈dom(order)∧v∈dom(order)∧u≠v⇒order(u)≠order(v)">
<org.eventb.core.prIdent name="order" org.eventb.core.type="ℙ(users×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p15" org.eventb.core.predicate="¬leaving=(∅ ⦂ ℙ(users))"/>
<org.eventb.core.prPred name="p9" org.eventb.core.predicate="waiting≠(∅ ⦂ ℙ(users))⇒(∃u⦂users·∀w⦂users·u∈waiting∧(w∈waiting⇒priority(u)≥priority(w)∧(priority(w)=priority(u)∧w≠u⇒order(u)&lt;order(w))))">
<org.eventb.core.prIdent name="order" org.eventb.core.type="ℙ(users×ℤ)"/>
<org.eventb.core.prIdent name="priority" org.eventb.core.type="ℙ(users×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p22" org.eventb.core.predicate="waiting⊆users"/>
<org.eventb.core.prPred name="p8" org.eventb.core.predicate="⊥∨((leaving ∖ {user}=(∅ ⦂ ℙ(users))⇒finite(passengers ∖ {user}))∧(⊥∨⊥∨(leaving ∖ {user}=(∅ ⦂ ℙ(users))⇒finite(passengers ∖ {user}))))"/>
<org.eventb.core.prPred name="p19" org.eventb.core.predicate="finite(passengers ∖ {user})"/>
<org.eventb.core.prPred name="p17" org.eventb.core.predicate="¬leaving⊆{user}∨(leaving⊆{user}∧card(passengers ∖ {user})&lt;capacity)∨¬users⊆waiting∪(passengers ∖ {user})∨(leaving⊆{user}∧card(passengers ∖ {user})=capacity)∨(leaving⊆{user}∧waiting=(∅ ⦂ ℙ(users)))"/>
<org.eventb.core.prPred name="p12" org.eventb.core.predicate="∀u⦂users,v⦂users·u∈dom(order)∧v∈dom(order)∧¬u=v⇒¬order(u)=order(v)">
<org.eventb.core.prIdent name="order" org.eventb.core.type="ℙ(users×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p16" org.eventb.core.predicate="leaving⊆{user}⇒finite(passengers ∖ {user})"/>
<org.eventb.core.prPred name="p5" org.eventb.core.predicate="⊤∨((leaving=(∅ ⦂ ℙ(users))⇒⊤)∧((leaving=(∅ ⦂ ℙ(users))∧card(passengers)&lt;capacity)∨users ∖ (waiting∪passengers)≠(∅ ⦂ ℙ(users))∨(leaving=(∅ ⦂ ℙ(users))⇒⊤)))"/>
<org.eventb.core.prPred name="p20" org.eventb.core.predicate="∀E⦂ℙ(users)·E⊆users⇒(∃u⦂users·u∈E∧(∀w⦂users·w∈E⇒priority(w)≤priority(u)))">
<org.eventb.core.prIdent name="priority" org.eventb.core.type="ℙ(users×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p24" org.eventb.core.predicate="∀E⦂ℙ(users)·∃u⦂users·u∈E∧(∀w⦂users·w∈E⇒priority(w)≤priority(u))">
<org.eventb.core.prIdent name="priority" org.eventb.core.type="ℙ(users×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p1" org.eventb.core.predicate="leaving≠(∅ ⦂ ℙ(users))∨(leaving=(∅ ⦂ ℙ(users))∧card(passengers)&lt;capacity)∨users ∖ (waiting∪passengers)≠(∅ ⦂ ℙ(users))∨(leaving=(∅ ⦂ ℙ(users))∧card(passengers)=capacity)∨(leaving=(∅ ⦂ ℙ(users))∧waiting=(∅ ⦂ ℙ(users)))"/>
<org.eventb.core.prPred name="p10" org.eventb.core.predicate="¬waiting=(∅ ⦂ ℙ(users))⇒(∃u⦂users·u∈waiting∧(∀w⦂users·w∈waiting⇒priority(u)≥priority(w)∧(priority(w)=priority(u)∧¬w=u⇒order(u)&lt;order(w))))">
<org.eventb.core.prIdent name="order" org.eventb.core.type="ℙ(users×ℤ)"/>
<org.eventb.core.prIdent name="priority" org.eventb.core.type="ℙ(users×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p2" org.eventb.core.predicate="⊤∨(leaving=(∅ ⦂ ℙ(users))∧card(passengers)&lt;capacity)∨users ∖ (waiting∪passengers)≠(∅ ⦂ ℙ(users))∨(leaving=(∅ ⦂ ℙ(users))∧card(passengers)=capacity)∨(leaving=(∅ ⦂ ℙ(users))∧waiting=(∅ ⦂ ℙ(users)))"/>
<org.eventb.core.prPred name="p23" org.eventb.core.predicate="passengers⊆users"/>
<org.eventb.core.prReas name="r2" org.eventb.core.prRID="org.eventb.core.seqprover.typeRewrites:1"/>
<org.eventb.core.prReas name="r0" org.eventb.core.prRID="org.eventb.core.seqprover.genMPL2"/>
<org.eventb.core.prReas name="r1" org.eventb.core.prRID="org.eventb.core.seqprover.autoRewritesL4:0"/>
</org.eventb.core.prProof>
<org.eventb.core.prProof name="INITIALISATION/inv1/INV" org.eventb.core.confidence="1000" org.eventb.core.prFresh="" org.eventb.core.prGoal="p0" org.eventb.core.prHyps="" org.eventb.core.prSets="users">
<org.eventb.core.lang name="L"/>
<org.eventb.core.prRule name="r0" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="simplification rewrites" org.eventb.core.prGoal="p0" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p1">
<org.eventb.core.prRule name="r1" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="⊤ goal" org.eventb.core.prGoal="p1" org.eventb.core.prHyps=""/>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
<org.eventb.core.prPred name="p1" org.eventb.core.predicate="⊤"/>
<org.eventb.core.prPred name="p0" org.eventb.core.predicate="∀w⦂users·w∈(∅ ⦂ ℙ(users))⇒w∈dom(∅ ⦂ ℙ(users×ℤ))"/>
<org.eventb.core.prReas name="r1" org.eventb.core.prRID="org.eventb.core.seqprover.trueGoal"/>
<org.eventb.core.prReas name="r0" org.eventb.core.prRID="org.eventb.core.seqprover.autoRewritesL4:0"/>
</org.eventb.core.prProof>
<org.eventb.core.prProof name="USER_ARRIVES/inv1/INV" org.eventb.core.confidence="0" org.eventb.core.prFresh="w" org.eventb.core.prGoal="p0" org.eventb.core.prHyps="" org.eventb.core.prSets="users">
<org.eventb.core.lang name="L"/>
<org.eventb.core.prRule name="r0" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="generalized MP" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="REWRITE0" org.eventb.core.prHidden="p1" org.eventb.core.prHyps="p3" org.eventb.core.prInfHyps="p2"/>
<org.eventb.core.prRule name="r1" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="simplification rewrites" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="REWRITE0" org.eventb.core.prHidden="p4" org.eventb.core.prHyps="" org.eventb.core.prInfHyps="p5"/>
<org.eventb.core.prHypAction name="REWRITE1" org.eventb.core.prHidden="p6" org.eventb.core.prHyps="" org.eventb.core.prInfHyps="p7"/>
<org.eventb.core.prHypAction name="REWRITE2" org.eventb.core.prHidden="p8" org.eventb.core.prHyps="" org.eventb.core.prInfHyps="p9"/>
<org.eventb.core.prHypAction name="REWRITE3" org.eventb.core.prHidden="p10" org.eventb.core.prHyps="" org.eventb.core.prInfHyps="p11"/>
<org.eventb.core.prHypAction name="HIDE4" org.eventb.core.prHyps="p2"/>
<org.eventb.core.prRule name="r2" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="type rewrites" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="REWRITE0" org.eventb.core.prHidden="p12" org.eventb.core.prHyps="" org.eventb.core.prInfHyps="p13"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p14"/>
<org.eventb.core.prHypAction name="HIDE2" org.eventb.core.prHyps="p15"/>
<org.eventb.core.prRule name="r1" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="simplification rewrites" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="REWRITE0" org.eventb.core.prHidden="p13" org.eventb.core.prHyps="" org.eventb.core.prInfHyps="p16"/>
<org.eventb.core.prRule name="r3" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="∀ goal (frees w)" org.eventb.core.prGoal="p0" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p17">
<org.eventb.core.prIdent name="w" org.eventb.core.type="users"/>
<org.eventb.core.prRule name="r4" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="⇒ goal" org.eventb.core.prGoal="p17" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p19" org.eventb.core.prHyps="p18"/>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
<org.eventb.core.prIdent name="counter" org.eventb.core.type="ℤ"/>
<org.eventb.core.prIdent name="order" org.eventb.core.type="ℙ(users×ℤ)"/>
<org.eventb.core.prIdent name="user" org.eventb.core.type="users"/>
<org.eventb.core.prIdent name="waiting" org.eventb.core.type="ℙ(users)"/>
<org.eventb.core.prPred name="p13" org.eventb.core.predicate="∀E⦂ℙ(users)·⊤⇒(∃u⦂users·u∈E∧(∀w⦂users·w∈E⇒priority(w)≤priority(u)))">
<org.eventb.core.prIdent name="priority" org.eventb.core.type="ℙ(users×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p6" org.eventb.core.predicate="waiting≠(∅ ⦂ ℙ(users))⇒(∃u⦂users·∀w⦂users·u∈waiting∧(w∈waiting⇒priority(u)≥priority(w)∧(priority(w)=priority(u)∧w≠u⇒order(u)&lt;order(w))))">
<org.eventb.core.prIdent name="priority" org.eventb.core.type="ℙ(users×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p14" org.eventb.core.predicate="waiting⊆users"/>
<org.eventb.core.prPred name="p0" org.eventb.core.predicate="∀w⦂users·w∈waiting∪{user}⇒w∈dom(order{user ↦ counter})"/>
<org.eventb.core.prPred name="p17" org.eventb.core.predicate="w∈waiting∪{user}⇒w∈dom(order{user ↦ counter})">
<org.eventb.core.prIdent name="w" org.eventb.core.type="users"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p5" org.eventb.core.predicate="¬leaving=(∅ ⦂ ℙ(users))∨(leaving=(∅ ⦂ ℙ(users))∧card(passengers)&lt;capacity)∨¬users⊆waiting∪passengers∨(leaving=(∅ ⦂ ℙ(users))∧card(passengers)=capacity)∨(leaving=(∅ ⦂ ℙ(users))∧waiting=(∅ ⦂ ℙ(users)))">
<org.eventb.core.prIdent name="capacity" org.eventb.core.type="ℤ"/>
<org.eventb.core.prIdent name="leaving" org.eventb.core.type="ℙ(users)"/>
<org.eventb.core.prIdent name="passengers" org.eventb.core.type="ℙ(users)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p9" org.eventb.core.predicate="∀u⦂users,v⦂users·u∈dom(order)∧v∈dom(order)∧¬u=v⇒¬order(u)=order(v)"/>
<org.eventb.core.prPred name="p12" org.eventb.core.predicate="∀E⦂ℙ(users)·E⊆users⇒(∃u⦂users·u∈E∧(∀w⦂users·w∈E⇒priority(w)≤priority(u)))">
<org.eventb.core.prIdent name="priority" org.eventb.core.type="ℙ(users×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p10" org.eventb.core.predicate="users ∖ (passengers∪waiting)≠(∅ ⦂ ℙ(users))">
<org.eventb.core.prIdent name="passengers" org.eventb.core.type="ℙ(users)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p16" org.eventb.core.predicate="∀E⦂ℙ(users)·∃u⦂users·u∈E∧(∀w⦂users·w∈E⇒priority(w)≤priority(u))">
<org.eventb.core.prIdent name="priority" org.eventb.core.type="ℙ(users×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p3" org.eventb.core.predicate="finite(passengers)">
<org.eventb.core.prIdent name="passengers" org.eventb.core.type="ℙ(users)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p4" org.eventb.core.predicate="leaving≠(∅ ⦂ ℙ(users))∨(leaving=(∅ ⦂ ℙ(users))∧card(passengers)&lt;capacity)∨users ∖ (waiting∪passengers)≠(∅ ⦂ ℙ(users))∨(leaving=(∅ ⦂ ℙ(users))∧card(passengers)=capacity)∨(leaving=(∅ ⦂ ℙ(users))∧waiting=(∅ ⦂ ℙ(users)))">
<org.eventb.core.prIdent name="capacity" org.eventb.core.type="ℤ"/>
<org.eventb.core.prIdent name="leaving" org.eventb.core.type="ℙ(users)"/>
<org.eventb.core.prIdent name="passengers" org.eventb.core.type="ℙ(users)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p7" org.eventb.core.predicate="¬waiting=(∅ ⦂ ℙ(users))⇒(∃u⦂users·u∈waiting∧(∀w⦂users·w∈waiting⇒priority(u)≥priority(w)∧(priority(w)=priority(u)∧¬w=u⇒order(u)&lt;order(w))))">
<org.eventb.core.prIdent name="priority" org.eventb.core.type="ℙ(users×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p11" org.eventb.core.predicate="¬users⊆passengers∪waiting">
<org.eventb.core.prIdent name="passengers" org.eventb.core.type="ℙ(users)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p2" org.eventb.core.predicate="leaving≠(∅ ⦂ ℙ(users))∨((leaving=(∅ ⦂ ℙ(users))⇒⊤)∧((leaving=(∅ ⦂ ℙ(users))∧card(passengers)&lt;capacity)∨users ∖ (waiting∪passengers)≠(∅ ⦂ ℙ(users))∨(leaving=(∅ ⦂ ℙ(users))⇒⊤)))">
<org.eventb.core.prIdent name="capacity" org.eventb.core.type="ℤ"/>
<org.eventb.core.prIdent name="leaving" org.eventb.core.type="ℙ(users)"/>
<org.eventb.core.prIdent name="passengers" org.eventb.core.type="ℙ(users)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p18" org.eventb.core.predicate="w∈waiting∪{user}">
<org.eventb.core.prIdent name="w" org.eventb.core.type="users"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p1" org.eventb.core.predicate="leaving≠(∅ ⦂ ℙ(users))∨((leaving=(∅ ⦂ ℙ(users))⇒finite(passengers))∧((leaving=(∅ ⦂ ℙ(users))∧card(passengers)&lt;capacity)∨users ∖ (waiting∪passengers)≠(∅ ⦂ ℙ(users))∨(leaving=(∅ ⦂ ℙ(users))⇒finite(passengers))))">
<org.eventb.core.prIdent name="capacity" org.eventb.core.type="ℤ"/>
<org.eventb.core.prIdent name="leaving" org.eventb.core.type="ℙ(users)"/>
<org.eventb.core.prIdent name="passengers" org.eventb.core.type="ℙ(users)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p8" org.eventb.core.predicate="∀u⦂users·∀v⦂users·u∈dom(order)∧v∈dom(order)∧u≠v⇒order(u)≠order(v)"/>
<org.eventb.core.prPred name="p15" org.eventb.core.predicate="passengers⊆users">
<org.eventb.core.prIdent name="passengers" org.eventb.core.type="ℙ(users)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p19" org.eventb.core.predicate="w∈dom(order{user ↦ counter})">
<org.eventb.core.prIdent name="w" org.eventb.core.type="users"/>
</org.eventb.core.prPred>
<org.eventb.core.prReas name="r2" org.eventb.core.prRID="org.eventb.core.seqprover.typeRewrites:1"/>
<org.eventb.core.prReas name="r0" org.eventb.core.prRID="org.eventb.core.seqprover.genMPL2"/>
<org.eventb.core.prReas name="r3" org.eventb.core.prRID="org.eventb.core.seqprover.allI"/>
<org.eventb.core.prReas name="r1" org.eventb.core.prRID="org.eventb.core.seqprover.autoRewritesL4:0"/>
<org.eventb.core.prReas name="r4" org.eventb.core.prRID="org.eventb.core.seqprover.impI"/>
</org.eventb.core.prProof>
<org.eventb.core.prProof name="USER_ENTERS/inv1/INV" org.eventb.core.confidence="1000" org.eventb.core.prFresh="w" org.eventb.core.prGoal="p0" org.eventb.core.prHyps="p1" org.eventb.core.prSets="users">
<org.eventb.core.lang name="L"/>
<org.eventb.core.prRule name="r0" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="generalized MP" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="REWRITE0" org.eventb.core.prHidden="p2" org.eventb.core.prHyps="p4" org.eventb.core.prInfHyps="p3"/>
<org.eventb.core.prHypAction name="REWRITE1" org.eventb.core.prHidden="p5" org.eventb.core.prHyps="p4,p7" org.eventb.core.prInfHyps="p6"/>
<org.eventb.core.prHypAction name="REWRITE2" org.eventb.core.prHidden="p8" org.eventb.core.prHyps="p10" org.eventb.core.prInfHyps="p9"/>
<org.eventb.core.prRule name="r1" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="simplification rewrites" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="REWRITE0" org.eventb.core.prHidden="p11" org.eventb.core.prHyps="" org.eventb.core.prInfHyps="p12"/>
<org.eventb.core.prHypAction name="REWRITE1" org.eventb.core.prHidden="p10" org.eventb.core.prHyps="" org.eventb.core.prInfHyps="p13"/>
<org.eventb.core.prHypAction name="REWRITE2" org.eventb.core.prHidden="p14" org.eventb.core.prHyps="" org.eventb.core.prInfHyps="p15"/>
<org.eventb.core.prHypAction name="REWRITE3" org.eventb.core.prHidden="p3" org.eventb.core.prHyps="" org.eventb.core.prInfHyps="p16"/>
<org.eventb.core.prHypAction name="HIDE4" org.eventb.core.prHyps="p6"/>
<org.eventb.core.prHypAction name="REWRITE5" org.eventb.core.prHidden="p9" org.eventb.core.prHyps="" org.eventb.core.prInfHyps="p17"/>
<org.eventb.core.prRule name="r0" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="generalized MP" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="REWRITE0" org.eventb.core.prHidden="p16" org.eventb.core.prHyps="p4,p13" org.eventb.core.prInfHyps="p18"/>
<org.eventb.core.prRule name="r1" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="simplification rewrites" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="REWRITE0" org.eventb.core.prHidden="p18" org.eventb.core.prHyps="" org.eventb.core.prInfHyps="p19"/>
<org.eventb.core.prRule name="r2" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="type rewrites" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="REWRITE0" org.eventb.core.prHidden="p20" org.eventb.core.prHyps="" org.eventb.core.prInfHyps="p21"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p22"/>
<org.eventb.core.prHypAction name="HIDE2" org.eventb.core.prHyps="p23"/>
<org.eventb.core.prRule name="r1" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="simplification rewrites" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="REWRITE0" org.eventb.core.prHidden="p21" org.eventb.core.prHyps="" org.eventb.core.prInfHyps="p24"/>
<org.eventb.core.prRule name="r3" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="∀ goal (frees w)" org.eventb.core.prGoal="p0" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p25">
<org.eventb.core.prIdent name="w" org.eventb.core.type="users"/>
<org.eventb.core.prRule name="r4" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="⇒ goal" org.eventb.core.prGoal="p25" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p27" org.eventb.core.prHyps="p26">
<org.eventb.core.prRule name="r5" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="total function dom substitution in goal" org.eventb.core.prGoal="p27" org.eventb.core.prHyps="p1">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p28">
<org.eventb.core.prRule name="r2" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="type rewrites" org.eventb.core.prGoal="p28" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p29">
<org.eventb.core.prRule name="r6" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="⊤ goal" org.eventb.core.prGoal="p29" org.eventb.core.prHyps=""/>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
<org.eventb.core.prString name=".pos" org.eventb.core.prSValue="1"/>
<org.eventb.core.prExprRef name=".subst" org.eventb.core.prRef="e0"/>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
<org.eventb.core.prIdent name="order" org.eventb.core.type="ℙ(users×ℤ)"/>
<org.eventb.core.prIdent name="user" org.eventb.core.type="users"/>
<org.eventb.core.prIdent name="waiting" org.eventb.core.type="ℙ(users)"/>
<org.eventb.core.prPred name="p14" org.eventb.core.predicate="∀u⦂users·u∈waiting∧u≠user∧priority(u)=priority(user)⇒order(u)&lt;order(user)">
<org.eventb.core.prIdent name="priority" org.eventb.core.type="ℙ(users×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p21" org.eventb.core.predicate="∀E⦂ℙ(users)·⊤⇒(∃u⦂users·u∈E∧(∀w⦂users·w∈E⇒priority(w)≤priority(u)))">
<org.eventb.core.prIdent name="priority" org.eventb.core.type="ℙ(users×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p26" org.eventb.core.predicate="w∈waiting ∖ {user}">
<org.eventb.core.prIdent name="w" org.eventb.core.type="users"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p16" org.eventb.core.predicate="¬leaving=(∅ ⦂ ℙ(users))∨card(passengers)&lt;capacity∨¬users⊆waiting∪passengers∨card(passengers)=capacity∨waiting=(∅ ⦂ ℙ(users))">
<org.eventb.core.prIdent name="capacity" org.eventb.core.type="ℤ"/>
<org.eventb.core.prIdent name="leaving" org.eventb.core.type="ℙ(users)"/>
<org.eventb.core.prIdent name="passengers" org.eventb.core.type="ℙ(users)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p1" org.eventb.core.predicate="order∈users → ℕ"/>
<org.eventb.core.prPred name="p4" org.eventb.core.predicate="leaving=(∅ ⦂ ℙ(users))">
<org.eventb.core.prIdent name="leaving" org.eventb.core.type="ℙ(users)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p18" org.eventb.core.predicate="¬⊤∨card(passengers)&lt;capacity∨¬users⊆waiting∪passengers∨card(passengers)=capacity∨⊥">
<org.eventb.core.prIdent name="capacity" org.eventb.core.type="ℤ"/>
<org.eventb.core.prIdent name="passengers" org.eventb.core.type="ℙ(users)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p7" org.eventb.core.predicate="finite(passengers)">
<org.eventb.core.prIdent name="passengers" org.eventb.core.type="ℙ(users)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p5" org.eventb.core.predicate="leaving≠(∅ ⦂ ℙ(users))∨((leaving=(∅ ⦂ ℙ(users))⇒finite(passengers))∧((leaving=(∅ ⦂ ℙ(users))∧card(passengers)&lt;capacity)∨users ∖ (waiting∪passengers)≠(∅ ⦂ ℙ(users))∨(leaving=(∅ ⦂ ℙ(users))⇒finite(passengers))))">
<org.eventb.core.prIdent name="capacity" org.eventb.core.type="ℤ"/>
<org.eventb.core.prIdent name="leaving" org.eventb.core.type="ℙ(users)"/>
<org.eventb.core.prIdent name="passengers" org.eventb.core.type="ℙ(users)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p11" org.eventb.core.predicate="∀u⦂users·∀v⦂users·u∈dom(order)∧v∈dom(order)∧u≠v⇒order(u)≠order(v)"/>
<org.eventb.core.prPred name="p25" org.eventb.core.predicate="w∈waiting ∖ {user}⇒w∈dom(order)">
<org.eventb.core.prIdent name="w" org.eventb.core.type="users"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p29" org.eventb.core.predicate="⊤"/>
<org.eventb.core.prPred name="p28" org.eventb.core.predicate="w∈users">
<org.eventb.core.prIdent name="w" org.eventb.core.type="users"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p8" org.eventb.core.predicate="waiting≠(∅ ⦂ ℙ(users))⇒(∃u⦂users·∀w⦂users·u∈waiting∧(w∈waiting⇒priority(u)≥priority(w)∧(priority(w)=priority(u)∧w≠u⇒order(u)&lt;order(w))))">
<org.eventb.core.prIdent name="priority" org.eventb.core.type="ℙ(users×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p22" org.eventb.core.predicate="waiting⊆users"/>
<org.eventb.core.prPred name="p9" org.eventb.core.predicate="⊤⇒(∃u⦂users·∀w⦂users·u∈waiting∧(w∈waiting⇒priority(u)≥priority(w)∧(priority(w)=priority(u)∧w≠u⇒order(u)&lt;order(w))))">
<org.eventb.core.prIdent name="priority" org.eventb.core.type="ℙ(users×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p12" org.eventb.core.predicate="∀u⦂users,v⦂users·u∈dom(order)∧v∈dom(order)∧¬u=v⇒¬order(u)=order(v)"/>
<org.eventb.core.prPred name="p20" org.eventb.core.predicate="∀E⦂ℙ(users)·E⊆users⇒(∃u⦂users·u∈E∧(∀w⦂users·w∈E⇒priority(w)≤priority(u)))">
<org.eventb.core.prIdent name="priority" org.eventb.core.type="ℙ(users×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p13" org.eventb.core.predicate="¬waiting=(∅ ⦂ ℙ(users))"/>
<org.eventb.core.prPred name="p24" org.eventb.core.predicate="∀E⦂ℙ(users)·∃u⦂users·u∈E∧(∀w⦂users·w∈E⇒priority(w)≤priority(u))">
<org.eventb.core.prIdent name="priority" org.eventb.core.type="ℙ(users×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p19" org.eventb.core.predicate="card(passengers)&lt;capacity∨¬users⊆waiting∪passengers∨card(passengers)=capacity">
<org.eventb.core.prIdent name="capacity" org.eventb.core.type="ℤ"/>
<org.eventb.core.prIdent name="passengers" org.eventb.core.type="ℙ(users)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p15" org.eventb.core.predicate="∀u⦂users·u∈waiting∧¬u=user∧priority(u)=priority(user)⇒order(u)&lt;order(user)">
<org.eventb.core.prIdent name="priority" org.eventb.core.type="ℙ(users×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p0" org.eventb.core.predicate="∀w⦂users·w∈waiting ∖ {user}⇒w∈dom(order)"/>
<org.eventb.core.prPred name="p6" org.eventb.core.predicate="leaving≠(∅ ⦂ ℙ(users))∨((⊤⇒⊤)∧((⊤∧card(passengers)&lt;capacity)∨users ∖ (waiting∪passengers)≠(∅ ⦂ ℙ(users))∨(⊤⇒⊤)))">
<org.eventb.core.prIdent name="capacity" org.eventb.core.type="ℤ"/>
<org.eventb.core.prIdent name="leaving" org.eventb.core.type="ℙ(users)"/>
<org.eventb.core.prIdent name="passengers" org.eventb.core.type="ℙ(users)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p3" org.eventb.core.predicate="leaving≠(∅ ⦂ ℙ(users))∨(⊤∧card(passengers)&lt;capacity)∨users ∖ (waiting∪passengers)≠(∅ ⦂ ℙ(users))∨(⊤∧card(passengers)=capacity)∨(⊤∧waiting=(∅ ⦂ ℙ(users)))">
<org.eventb.core.prIdent name="capacity" org.eventb.core.type="ℤ"/>
<org.eventb.core.prIdent name="leaving" org.eventb.core.type="ℙ(users)"/>
<org.eventb.core.prIdent name="passengers" org.eventb.core.type="ℙ(users)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p2" org.eventb.core.predicate="leaving≠(∅ ⦂ ℙ(users))∨(leaving=(∅ ⦂ ℙ(users))∧card(passengers)&lt;capacity)∨users ∖ (waiting∪passengers)≠(∅ ⦂ ℙ(users))∨(leaving=(∅ ⦂ ℙ(users))∧card(passengers)=capacity)∨(leaving=(∅ ⦂ ℙ(users))∧waiting=(∅ ⦂ ℙ(users)))">
<org.eventb.core.prIdent name="capacity" org.eventb.core.type="ℤ"/>
<org.eventb.core.prIdent name="leaving" org.eventb.core.type="ℙ(users)"/>
<org.eventb.core.prIdent name="passengers" org.eventb.core.type="ℙ(users)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p10" org.eventb.core.predicate="waiting≠(∅ ⦂ ℙ(users))"/>
<org.eventb.core.prPred name="p27" org.eventb.core.predicate="w∈dom(order)">
<org.eventb.core.prIdent name="w" org.eventb.core.type="users"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p17" org.eventb.core.predicate="∃u⦂users·u∈waiting∧(∀w⦂users·w∈waiting⇒priority(u)≥priority(w)∧(priority(w)=priority(u)∧¬w=u⇒order(u)&lt;order(w)))">
<org.eventb.core.prIdent name="priority" org.eventb.core.type="ℙ(users×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p23" org.eventb.core.predicate="passengers⊆users">
<org.eventb.core.prIdent name="passengers" org.eventb.core.type="ℙ(users)"/>
</org.eventb.core.prPred>
<org.eventb.core.prExpr name="e0" org.eventb.core.expression="users"/>
<org.eventb.core.prReas name="r2" org.eventb.core.prRID="org.eventb.core.seqprover.typeRewrites:1"/>
<org.eventb.core.prReas name="r0" org.eventb.core.prRID="org.eventb.core.seqprover.genMPL2"/>
<org.eventb.core.prReas name="r6" org.eventb.core.prRID="org.eventb.core.seqprover.trueGoal"/>
<org.eventb.core.prReas name="r3" org.eventb.core.prRID="org.eventb.core.seqprover.allI"/>
<org.eventb.core.prReas name="r1" org.eventb.core.prRID="org.eventb.core.seqprover.autoRewritesL4:0"/>
<org.eventb.core.prReas name="r4" org.eventb.core.prRID="org.eventb.core.seqprover.impI"/>
<org.eventb.core.prReas name="r5" org.eventb.core.prRID="org.eventb.core.seqprover.totalDom:2"/>
</org.eventb.core.prProof>
</org.eventb.core.prFile>
